<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="ç‚¹æ»´ç§¯ç´¯,èšå°‘æˆå¤š!             å¿ƒä¸­æœ‰å–„,ä¸éª„ä¸èº">
<meta name="keywords" content="eos,eth,tron,hyper-fabric,react,node,go,android,graphQL">
<meta property="og:type" content="website">
<meta property="og:title" content="hello shaokun">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="hello shaokun">
<meta property="og:description" content="ç‚¹æ»´ç§¯ç´¯,èšå°‘æˆå¤š!             å¿ƒä¸­æœ‰å–„,ä¸éª„ä¸èº">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="hello shaokun">
<meta name="twitter:description" content="ç‚¹æ»´ç§¯ç´¯,èšå°‘æˆå¤š!             å¿ƒä¸­æœ‰å–„,ä¸éª„ä¸èº">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/">





  <title>hello shaokun</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">hello shaokun</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">code is law</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            å½’æ¡£
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/08/16/koa+graphqlå®šä¹‰ä½ çš„æ¥å£/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shaokun">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hello shaokun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/16/koa+graphqlå®šä¹‰ä½ çš„æ¥å£/" itemprop="url">koa + graphqlçš„ä½¿ç”¨</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2020-08-16T13:13:14+08:00">
                2020-08-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h4><blockquote>
<p>å®Œæˆhttpè¯·æ±‚åˆ°graphqlçš„è¯·æ±‚æ”¹é€ </p>
</blockquote>
<h4 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h4><blockquote>
<p>å†…å®¹å¤§éƒ¨åˆ†æ¥è‡ªå·±graphqlä¸apollo-serverå®˜ç½‘, å†…éƒ¨åŠ ä¸Šè‡ªå·±çš„ä¸€äº›ç†è§£,è‡³äºæ”¹é€ å˜›,å°±è‡ªå·±åŠ¨æ‰‹å’¯</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">"koa"</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; ApolloServer, gql &#125; = <span class="built_in">require</span>(<span class="string">"apollo-server-koa"</span>);</span><br><span class="line"><span class="keyword">const</span> GraphQLJSON = <span class="built_in">require</span>(<span class="string">"graphql-type-json"</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; GraphQLScalarType &#125; = <span class="built_in">require</span>(<span class="string">"graphql"</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; Kind &#125; = <span class="built_in">require</span>(<span class="string">"graphql/language"</span>);</span><br><span class="line"><span class="keyword">const</span> books = [</span><br><span class="line">  &#123;</span><br><span class="line">    title: <span class="string">"Harry Potter and the Chamber of Secrets"</span>,</span><br><span class="line">    author: <span class="string">"J.K. Rowling"</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    title: <span class="string">"Jurassic Park"</span>,</span><br><span class="line">    author: <span class="string">"Michael Crichton"</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> users = [</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="string">"1"</span>,</span><br><span class="line">    name: <span class="string">"Elizabeth Bennet"</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="string">"2"</span>,</span><br><span class="line">    name: <span class="string">"Fitzwilliam Darcy"</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> typeDefs = gql<span class="string">`</span></span><br><span class="line"><span class="string">  type Query &#123;</span></span><br><span class="line"><span class="string">    #   è¿”å›å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="string">    hello: String</span></span><br><span class="line"><span class="string">    # è¿”å›æ•°ç»„</span></span><br><span class="line"><span class="string">    books: [Book]</span></span><br><span class="line"><span class="string">    # é€šè¿‡å‚æ•°æŸ¥è¯¢</span></span><br><span class="line"><span class="string">    user(id: ID): User</span></span><br><span class="line"><span class="string">    info(date: Date): String</span></span><br><span class="line"><span class="string">    # è¯»å–æ•°æ®</span></span><br><span class="line"><span class="string">    foo: Foo</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  #ä½¿ç”¨ç¬¬ä¸‰æ–¹å®šä¹‰çš„æ ‡é‡ jsonç±»å‹</span></span><br><span class="line"><span class="string">  scalar JSON</span></span><br><span class="line"><span class="string">    # ä½¿ç”¨è‡ªå®šä¹‰çš„dateç±»å‹</span></span><br><span class="line"><span class="string">  scalar Date</span></span><br><span class="line"><span class="string">  type Foo &#123;</span></span><br><span class="line"><span class="string">    user: JSON</span></span><br><span class="line"><span class="string">    created: Date</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  type Book &#123;</span></span><br><span class="line"><span class="string">    title: String</span></span><br><span class="line"><span class="string">    author: String</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  type User &#123;</span></span><br><span class="line"><span class="string">    id: ID</span></span><br><span class="line"><span class="string">    name: String</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> resolvers = &#123;</span><br><span class="line">  <span class="built_in">JSON</span>: GraphQLJSON, <span class="comment">// ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„jsonæ ‡é‡</span></span><br><span class="line">  <span class="built_in">Date</span>: <span class="keyword">new</span> GraphQLScalarType(&#123;</span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰æ ‡é‡</span></span><br><span class="line">    name: <span class="string">"Date"</span>,</span><br><span class="line">    description: <span class="string">"Date custom scalar type"</span>,</span><br><span class="line">    parseValue(value) &#123;</span><br><span class="line">      <span class="comment">// variables å‚æ•°è§£æè·¯å¾„</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(value);</span><br><span class="line">    &#125;,</span><br><span class="line">    serialize(value) &#123;</span><br><span class="line">      <span class="keyword">return</span> value.getTime();</span><br><span class="line">    &#125;,</span><br><span class="line">    parseLiteral(ast) &#123;</span><br><span class="line">      <span class="comment">// å­—é¢é‡å‚æ•°è·¯å¾„</span></span><br><span class="line">      <span class="keyword">if</span> (ast.kind === Kind.INT) &#123;</span><br><span class="line">        <span class="comment">// ast.value æ°¸è¿œæ˜¯ å­—ç¬¦ä¸²ç±»å‹ æ‰€ä»¥éœ€è¦è½¬æ¢</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(+ast.value);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;),</span><br><span class="line">  Query: &#123;</span><br><span class="line">    hello: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">"Hello shaokun!"</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    books: <span class="function"><span class="params">()</span> =&gt;</span> books, <span class="comment">// ç›´æ¥è¿”å›æ•°æ®åº“ä¸­çš„books</span></span><br><span class="line">    user(parent, args, context) &#123;</span><br><span class="line">      <span class="comment">// parent è¿ç»­æŸ¥è¯¢ ä¸­ ä¸Šä¸€æ¬¡æŸ¥è¯¢çš„ç»“æœ</span></span><br><span class="line">      <span class="comment">// args æŸ¥è¯¢å‚æ•° å¦‚ä¸Šé¢çš„id</span></span><br><span class="line">      <span class="comment">// context å…¨å±€æ•°æ®çš„æ‹¿å–</span></span><br><span class="line">      <span class="built_in">console</span>.log(parent, args, context.name, context.age);</span><br><span class="line">      <span class="keyword">return</span> users.find(<span class="function">(<span class="params">user</span>) =&gt;</span> user.id === args.id);</span><br><span class="line">    &#125;,</span><br><span class="line">    foo: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        user: &#123; <span class="attr">name</span>: <span class="string">"shaokum"</span> &#125;,   <span class="comment">// å¦‚æœè¿”å›çš„ä¸æ˜¯jsonç±»å‹ åˆ™ä¸ºnull</span></span><br><span class="line">        created: <span class="keyword">new</span> <span class="built_in">Date</span>(),        <span class="comment">// Dateç±»å‹ å®é™…è¿”å›ç»™å‰ç«¯çš„æ˜¯ å®šä¹‰çš„scalarä¸­çš„serializeæ–¹æ³•</span></span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    info: <span class="function">(<span class="params">_, args</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// æŸ¥è¯¢æ–¹å¼ å­—é¢å¸¸é‡æ–¹å¼æŸ¥è¯¢</span></span><br><span class="line">      <span class="comment">// &#123;</span></span><br><span class="line">      <span class="comment">//     info(data:1597552212000)</span></span><br><span class="line">      <span class="comment">// &#125;</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"---info-"</span>, args); <span class="comment">// é€šè¿‡Date.parseLiteral æ–¹æ³•æ‹¿åˆ°è§£æçš„æ•°æ®</span></span><br><span class="line">      <span class="keyword">return</span> <span class="string">"this date is "</span> + args.date.toString();</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> server = <span class="keyword">new</span> ApolloServer(&#123;</span><br><span class="line">  typeDefs,</span><br><span class="line">  resolvers,</span><br><span class="line">  context: <span class="keyword">async</span> (request) =&gt; &#123;</span><br><span class="line">      <span class="comment">// å¯è·å–åˆ°rquestè¯·æ±‚</span></span><br><span class="line">    <span class="comment">// å¯ä»¥å…¨å±€æŒ‚è½½,å¦‚æˆæƒtoken dbå®ä¾‹</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      name: <span class="string">"shaokun"</span>,</span><br><span class="line">      age: <span class="number">18</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa();</span><br><span class="line">server.applyMiddleware(&#123; app &#125;);</span><br><span class="line"></span><br><span class="line">app.listen(&#123; <span class="attr">port</span>: <span class="number">4000</span> &#125;, () =&gt;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`ğŸš€ Server ready at http://localhost:4000<span class="subst">$&#123;server.graphqlPath&#125;</span>`</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h5 id="ç»“æœæ¼”ç¤º"><a href="#ç»“æœæ¼”ç¤º" class="headerlink" title="ç»“æœæ¼”ç¤º"></a>ç»“æœæ¼”ç¤º</h5><p><img src="/react/graphql.gif" alt="graphql query demo"> </p>
<h5 id="å…³äºæˆ‘"><a href="#å…³äºæˆ‘" class="headerlink" title="å…³äºæˆ‘"></a>å…³äºæˆ‘</h5><p>åŒºå—é“¾æŠ€æœ¯ç—´è¿·çš„ç¨‹åºçŒ¿ä¸€æšï¼Œå¦‚æœä½ å–œæ¬¢æˆ‘çš„æ–‡ç« ï¼Œå¯ä»¥åŠ ä¸Šå¾®ä¿¡å…±åŒå­¦ä¹ ï¼Œå…±åŒè¿›æ­¥ã€‚  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/02/åœ¨typescriptä¸­ä½¿ç”¨eosjs-ecc/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shaokun">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hello shaokun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/02/åœ¨typescriptä¸­ä½¿ç”¨eosjs-ecc/" itemprop="url">åœ¨typescriptä¸­ä½¿ç”¨eosjs-ecc</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2020-02-02T16:19:14+08:00">
                2020-02-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><ul>
<li>tså¼€å‘åç«¯é¡¹ç›®,è€ƒè™‘åˆ°ç»´æŠ¤çš„éœ€è¦,è¿˜æ˜¯éœ€è¦tsæ¥æ”¯æŒ.å…¶ä¸­æ¶‰åŠåˆ°çš„libéƒ½èƒ½æ‰¾åˆ°å¯¹åº”çš„types,ä½†æ˜¯ä¹Ÿæœ‰ä¾‹å¤–æ¯”å¦‚eosjs-ecc</li>
</ul>
<h4 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h4><ol>
<li>ç®€å•å¿«é€Ÿ,ä½†æ˜¯æ²¡æœ‰ä»»ä½•æç¤ºäº†,IDEåŸºæœ¬çš„æç¤ºéƒ½æ²¡æœ‰äº†,å¯¹äºç›´æ¥å°†.jsâ€”&gt;.tså¯ä»¥ä½¿ç”¨</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tsconfig.jsonä¸­å°†æ­¤å­—æ®µè®¾ä¸ºfalse</span></span><br><span class="line">  <span class="string">"noImplicitAny"</span>: <span class="literal">false</span>,</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>è‡ªå·±å†™ **d.ts,å–œæ¬¢çš„åŒå­¦å¯ä»¥å°è¯•ä¸€ä¸‹</li>
<li><p>å·¥å…·è‡ªåŠ¨ç”Ÿæˆ,æ¨èæ–¹å¼<br> -è¿™é‡Œä½¿ç”¨å¾®è½¯æä¾›çš„<a href="https://github.com/microsoft/dts-gen" target="_blank" rel="noopener">dts-gen</a>è¿›è¡Œç”Ÿæˆ,æ”¾åˆ°é¡¹ç›®çš„ä»»æ„ç›®å½•å³å¯,ä½†æ˜¯è¿˜æ˜¯æ— æ³•ä½¿ç”¨,è¿™æ—¶éœ€è¦åœ¨æœ€å¤–é¢åŒ…è£¹ä¸€å±‚ declare module â€˜eosjs-eccâ€™{}å³å¯,å¦‚æœä½¿ç”¨ts-nodeæ‰§è¡Œé¡¹ç›®,éœ€è¦åœ¨å¯¼å…¥çš„æ—¶å€™æ·»åŠ ts-ignore,ç›´æ¥ä½¿ç”¨tscç¼–è¯‘åˆ™å¯ä»¥ä¸ç”¨</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @ts-ignore</span></span><br><span class="line"><span class="keyword">import</span> ecc <span class="keyword">from</span> <span class="string">'eosjs-ecc'</span></span><br><span class="line">ecc.randomKey(<span class="number">0</span>).then(<span class="function">(<span class="params">privateKey:string</span>) =&gt;</span> &#123;</span><br><span class="line">   	<span class="built_in">console</span>.log(privateKey )</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¼˜åŒ–  </p>
<ul>
<li>ç»†å¿ƒçš„åŒå­¦å‘ç°,é‡Œé¢çš„ç±»å‹å…¨æ˜¯any,ä¸€ç‚¹ç”¨å¤„éƒ½æ²¡æœ‰å•Š?<br>ä½†æ˜¯è¿™æ ·å¯ä»¥æœ‰IDEçš„æç¤ºäº†,tså¯ä»¥æ­£å¸¸å†™ä»£ç äº†å‘¢  </li>
<li><p>ç”±äºä¸€ä¸ªlibæˆ‘ä»¬ä¸ä¼šå®Œå…¨ç”¨å®ƒçš„æ–¹æ³•,é‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦å»ä¿®æ”¹ä¸€ä¸‹æˆ‘ä»¬éœ€è¦ä½¿ç”¨çš„ç±»å‹å³å¯.æ¯”å¦‚randomKeyè¿™ä¸ªæ–¹æ³•,æˆ‘ä»¬å°†å®ƒçš„declareä¸­çš„æŒ‰ç…§å¦‚ä¸‹æ›´æ”¹å³å¯,å†æ¬¡è°ƒç”¨å°±è¾¾åˆ°äº†æ­£å¸¸ä½¿ç”¨libçš„ç›®çš„å•¦</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// export function randomKey(cpuEntropyBits: number ): Promise&lt;string&gt;;</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">randomKey</span>(<span class="params">cpuEntropyBits?: number </span>): <span class="title">Promise</span>&lt;<span class="title">string</span>&gt;;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h4 id="ä¼˜åŒ–-2020-02-21-15-14-56"><a href="#ä¼˜åŒ–-2020-02-21-15-14-56" class="headerlink" title="ä¼˜åŒ–(2020-02-21 15:14:56)"></a>ä¼˜åŒ–(2020-02-21 15:14:56)</h4><ul>
<li>ä¸Šè¿°ç¬¬äºŒç‚¹ä¸­,ä½¿ç”¨ts-nodeéœ€è¦åŠ ä¸Šts-ignore,è€Œç›´æ¥ä½¿ç”¨tscç¼–è¯‘ä¸ºä»€ä¹ˆèƒ½è¿‡å‘¢?</li>
<li>åŸæ¥åœ¨tsconfig.jsonä¸­,æˆ‘ä½¿ç”¨includeå±æ€§å°†å…¶å£°æ˜æ–‡ä»¶åŒ…å«åˆ°ç¼–è¯‘ä¸­äº†,æ•…å¯ä½¿ç”¨.æŸ¥çœ‹ts-nodeæ–‡æ¡£,åªéœ€è¦åœ¨æ‰§è¡Œts-node åŠ ä¸Šâ€“filesé€‰é¡¹,è¿™æ ·å°†ä¼šåŠ è½½tcconfig.jsonçš„includeå±æ€§,è¿™æ ·å°±ç§»é™¤ts-ignoreè¿™ä¸ªé€‰é¡¹äº†</li>
</ul>
<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>  æœ€å¼€å§‹è‡ªå·±å†™*.d.ts,åç»­å‘ç°äº†å±…ç„¶è¿˜æœ‰dts-genè¿™æ ·çš„å·¥å…·.å›å¤´æƒ³æƒ³,åˆ©ç”¨è¿™äº›å·¥å…·,çœŸé¦™ ^0^,</p>
<h4 id="å…³äºæˆ‘"><a href="#å…³äºæˆ‘" class="headerlink" title="å…³äºæˆ‘"></a>å…³äºæˆ‘</h4><p>åŒºå—é“¾æŠ€æœ¯ç—´è¿·çš„ç¨‹åºçŒ¿ä¸€æšï¼Œå¦‚æœä½ å–œæ¬¢æˆ‘çš„æ–‡ç« ï¼Œå¯ä»¥åŠ ä¸Šå¾®ä¿¡å…±åŒå­¦ä¹ ï¼Œå…±åŒè¿›æ­¥ã€‚<br>email: <a href="mailto:&#115;&#107;&#x75;&#110;&#110;&#121;&#x40;&#x31;&#x36;&#x33;&#x2e;&#x63;&#111;&#109;" target="_blank" rel="noopener">&#115;&#107;&#x75;&#110;&#110;&#121;&#x40;&#x31;&#x36;&#x33;&#x2e;&#x63;&#111;&#109;</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/07/electronå¼€å‘è®°å½•/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shaokun">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hello shaokun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/07/electronå¼€å‘è®°å½•/" itemprop="url">create-react-app + electronå¼€å‘æ¡Œé¢ç‰ˆåº”ç”¨</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-09-07T19:26:50+08:00">
                2019-09-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h5><p>ä½¿ç”¨create-react-app æ¥é…ç½®electron å¹¶æ‰“åŒ…,å½“ç„¶ä¸æƒ³æŠ˜è…¾ç¯å¢ƒçš„å¯ä»¥ç›´æ¥ä½¿ç”¨<br><a href="https://github.com/electron-react-boilerplate/electron-react-boilerplate" target="_blank" rel="noopener">æ¨¡æ¿</a>æ¥æ­å»ºç¯å¢ƒå‘¢.æˆ‘é€‰æ‹©äº†æŠ˜è…¾,è¿™é‡Œè®°å½•å…¶ä¸­çš„å…³é”®ç‚¹</p>
<h4 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h4><ol>
<li>ä½¿ç”¨create-react-app åˆ›å»ºé¡¹ç›®</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app react-electron</span><br><span class="line">cd react-electron</span><br><span class="line">npm install electron electron-builder image-size url --save-dev</span><br><span class="line"><span class="comment">// electronåŸºç¡€åŒ…</span></span><br><span class="line"><span class="comment">// electron-builderæ‰“åŒ…å·¥å…·</span></span><br><span class="line"><span class="comment">// image-size æä¾›æ¡Œé¢å›¾æ ‡çš„lib</span></span><br><span class="line"><span class="comment">// url electronçš„æ–‡ä»¶è·¯å¾„éœ€è¦çš„ä¸œè¥¿</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>åœ¨publicé‡Œåˆ›å»ºelectron.jsæ–‡ä»¶(å¯ä»¥copyå®˜ç½‘çš„,ä¸‹é¢æ˜¯æˆ‘çš„æœ€ç»ˆç‰ˆæœ¬),ä¸€å®šè¦æ”¾åœ¨publicç›®å½•ä¸‹,å› ä¸ºcraä¼šæŠŠè¿™ä¸ªæ–‡ä»¶å¤¹çš„æ–‡ä»¶å¤åˆ¶åˆ°buildç›®å½•ä¸‹çš„å‘¢</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> electron = <span class="built_in">require</span>(<span class="string">'electron'</span>);</span><br><span class="line"><span class="keyword">const</span> platform = <span class="built_in">require</span>(<span class="string">'os'</span>).platform(); <span class="comment">// è·å–å¹³å°ï¼šhttps://nodejs.org/api/os.html#os_os_platform</span></span><br><span class="line"><span class="comment">// æ§åˆ¶appç”Ÿå‘½å‘¨æœŸ.</span></span><br><span class="line"><span class="keyword">const</span> app = electron.app;</span><br><span class="line"><span class="comment">// æµè§ˆå™¨çª—å£.</span></span><br><span class="line"><span class="keyword">const</span> BrowserWindow = electron.BrowserWindow;</span><br><span class="line"><span class="keyword">const</span> Menu = electron.Menu;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>);</span><br><span class="line"><span class="keyword">const</span> ipc = electron.ipcMain</span><br><span class="line"><span class="keyword">let</span> mainWindow;</span><br><span class="line"></span><br><span class="line">ipc.on(<span class="string">'app close window'</span>, (sys, msg) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(sys, msg)</span><br><span class="line">    mainWindow.close()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(platform);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> setupMenu = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> menu = <span class="keyword">new</span> Menu();</span><br><span class="line">    mainWindow.setMenu(menu);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> template = [&#123;</span><br><span class="line">        label: <span class="string">"Application"</span>,</span><br><span class="line">        submenu: [&#123;</span><br><span class="line">            label: <span class="string">"About Application"</span>,</span><br><span class="line">            selector: <span class="string">"orderFrontStandardAboutPanel:"</span></span><br><span class="line">        &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                type: <span class="string">"separator"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                label: <span class="string">"Quit"</span>,</span><br><span class="line">                accelerator: <span class="string">"Command+Q"</span>,</span><br><span class="line">                click: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                    quit();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        label: <span class="string">"Edit"</span>,</span><br><span class="line">        submenu: [&#123;</span><br><span class="line">            label: <span class="string">"Undo"</span>,</span><br><span class="line">            accelerator: <span class="string">"CmdOrCtrl+Z"</span>,</span><br><span class="line">            selector: <span class="string">"undo:"</span></span><br><span class="line">        &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                label: <span class="string">"Redo"</span>,</span><br><span class="line">                accelerator: <span class="string">"Shift+CmdOrCtrl+Z"</span>,</span><br><span class="line">                selector: <span class="string">"redo:"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                type: <span class="string">"separator"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                label: <span class="string">"Cut"</span>,</span><br><span class="line">                accelerator: <span class="string">"CmdOrCtrl+X"</span>,</span><br><span class="line">                selector: <span class="string">"cut:"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                label: <span class="string">"Copy"</span>,</span><br><span class="line">                accelerator: <span class="string">"CmdOrCtrl+C"</span>,</span><br><span class="line">                selector: <span class="string">"copy:"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                label: <span class="string">"Paste"</span>,</span><br><span class="line">                accelerator: <span class="string">"CmdOrCtrl+V"</span>,</span><br><span class="line">                selector: <span class="string">"paste:"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                label: <span class="string">"Select All"</span>,</span><br><span class="line">                accelerator: <span class="string">"CmdOrCtrl+A"</span>,</span><br><span class="line">                selector: <span class="string">"selectAll:"</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;];</span><br><span class="line"></span><br><span class="line">    Menu.setApplicationMenu(Menu.buildFromTemplate(template));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createWindow</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªæµè§ˆå™¨çª—å£.</span></span><br><span class="line">    mainWindow = <span class="keyword">new</span> BrowserWindow(&#123;</span><br><span class="line">        width: <span class="number">800</span>,</span><br><span class="line">        height: <span class="number">600</span>,</span><br><span class="line">        webPreferences: &#123;</span><br><span class="line">            nodeIntegration: <span class="literal">true</span>,  <span class="comment">//å…è®¸ä½¿ç”¨nodeçš„æ–¹å¼å¼•å…¥</span></span><br><span class="line">            webSecurity: <span class="literal">false</span>, <span class="comment">// å…è®¸ä½¿ç”¨æœ¬åœ°èµ„æº</span></span><br><span class="line">        &#125;,</span><br><span class="line">        backgroundColor: <span class="string">'#B1FF9D'</span>,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿™é‡Œè¦æ³¨æ„ä¸€ä¸‹ï¼Œè¿™é‡Œæ˜¯è®©æµè§ˆå™¨çª—å£åŠ è½½ç½‘é¡µã€‚</span></span><br><span class="line">    <span class="comment">// å¦‚æœæ˜¯å¼€å‘ç¯å¢ƒï¼Œåˆ™urlä¸ºhttp://localhost:3000ï¼ˆpackage.jsonä¸­é…ç½®ï¼‰</span></span><br><span class="line">    <span class="comment">// å¦‚æœæ˜¯ç”Ÿäº§ç¯å¢ƒï¼Œåˆ™urlä¸ºbuild/index.html</span></span><br><span class="line">    <span class="keyword">const</span> startUrl = process.env.ELECTRON_START_URL || url.format(&#123;</span><br><span class="line">        pathname: path.join(__dirname, <span class="string">'/../build/index.html'</span>),</span><br><span class="line">        protocol: <span class="string">'file:'</span>,</span><br><span class="line">        slashes: <span class="literal">true</span></span><br><span class="line">    &#125;);</span><br><span class="line">    setupMenu()</span><br><span class="line">    <span class="comment">// åŠ è½½ç½‘é¡µä¹‹åï¼Œä¼šåˆ›å»º`æ¸²æŸ“è¿›ç¨‹`</span></span><br><span class="line">    mainWindow.loadURL(startUrl);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰“å¼€chromeæµè§ˆå™¨å¼€å‘è€…å·¥å…·.</span></span><br><span class="line">    <span class="keyword">if</span> (startUrl.startsWith(<span class="string">'http'</span>)) &#123;</span><br><span class="line">        mainWindow.webContents.openDevTools();</span><br><span class="line">    &#125;</span><br><span class="line">    mainWindow.webContents.openDevTools();</span><br><span class="line">    mainWindow.on(<span class="string">'closed'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        mainWindow = <span class="literal">null</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.on(<span class="string">'ready'</span>, createWindow);</span><br><span class="line"></span><br><span class="line">app.on(<span class="string">'window-all-closed'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (process.platform !== <span class="string">'darwin'</span>) &#123;</span><br><span class="line">        app.quit();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.on(<span class="string">'activate'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (mainWindow === <span class="literal">null</span>) &#123;</span><br><span class="line">        createWindow();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>ä¿®æ”¹package.json  mainå­—æ®µä¿®æ”¹çš„æ˜¯ç¨‹åºçš„å…¥å£, buildä¸ºelectron-builderçš„æ‰“åŒ…çš„ä¸€äº›é…ç½®</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"main"</span>: <span class="string">"./public/electron.js"</span>,</span><br><span class="line"><span class="string">"homepage"</span>: <span class="string">"."</span>,</span><br><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  <span class="string">"start"</span>: <span class="string">"react-scripts start"</span>,</span><br><span class="line">  <span class="string">"build"</span>: <span class="string">"react-scripts build"</span>,</span><br><span class="line">  <span class="string">"test"</span>: <span class="string">"react-scripts test"</span>,</span><br><span class="line">  <span class="string">"eject"</span>: <span class="string">"react-scripts eject"</span>,</span><br><span class="line">  <span class="string">"electron"</span>: <span class="string">"electron ."</span>,</span><br><span class="line">  <span class="string">"electron-dev"</span>: <span class="string">"ELECTRON_START_URL=http://localhost:3000/ electron ."</span>,</span><br><span class="line">  <span class="string">"packager"</span>: <span class="string">"npm run build &amp;&amp; rm -rf dist &amp;&amp; electron-builder --mac"</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">"build"</span>: &#123;</span><br><span class="line">  <span class="string">"productName"</span>: <span class="string">"example"</span>,</span><br><span class="line">  <span class="string">"appId"</span>: <span class="string">"com.example.server"</span>,</span><br><span class="line">  <span class="string">"files"</span>: [</span><br><span class="line">    <span class="string">"build/**/*"</span>,</span><br><span class="line">    <span class="string">"package.json"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"directories"</span>: &#123;</span><br><span class="line">    <span class="string">"buildResources"</span>: <span class="string">"public"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>npm start å¯åŠ¨reacté¡¹ç›®</li>
<li>npm run electron-dev å¯åŠ¨electroné¡¹ç›®  </li>
<li>npm run build æ‰“åŒ…reacté¡¹ç›®</li>
<li>npm run electron æŸ¥çœ‹reactæ‰“åŒ…çš„ç»“æœ</li>
<li>npm run package æ‰“åŒ…macåº”ç”¨(winéœ€è¦å†é…ç½®ä¸€ä¸‹)</li>
</ol>
<h5 id="ç»“æœæ¼”ç¤º"><a href="#ç»“æœæ¼”ç¤º" class="headerlink" title="ç»“æœæ¼”ç¤º"></a>ç»“æœæ¼”ç¤º</h5><p><a href="https://github.com/shaokun11/react-electron" target="_blank" rel="noopener">æºç </a><br><img src="/react/react-electron.gif" alt="material-ui self host font"> </p>
<h5 id="å…³äºæˆ‘"><a href="#å…³äºæˆ‘" class="headerlink" title="å…³äºæˆ‘"></a>å…³äºæˆ‘</h5><p>åŒºå—é“¾æŠ€æœ¯ç—´è¿·çš„ç¨‹åºçŒ¿ä¸€æšï¼Œå¦‚æœä½ å–œæ¬¢æˆ‘çš„æ–‡ç« ï¼Œå¯ä»¥åŠ ä¸Šå¾®ä¿¡å…±åŒå­¦ä¹ ï¼Œå…±åŒè¿›æ­¥ã€‚  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/13/material-uiä¹‹è‡ªå®šä¹‰å­—ä½“/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shaokun">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hello shaokun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/13/material-uiä¹‹è‡ªå®šä¹‰å­—ä½“/" itemprop="url">material-uiä¹‹è‡ªå®šä¹‰å­—ä½“</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-08-13T21:02:00+08:00">
                2019-08-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="å› ç”±"><a href="#å› ç”±" class="headerlink" title="å› ç”±"></a>å› ç”±</h5><blockquote>
<p>å› è¿‘æœŸä½¿éœ€é¡¹ç›®éœ€è¦æ„å»ºå‰ç«¯é¡µé¢,æ•…ç”¨reactjsä½œä¸ºå‰ç«¯çš„æŠ€æœ¯æ¡†æ¶,uié€‰æ‹©material-ui v4.3.1ä½œä¸ºä¸€ä¸ªåŸºç¡€.ä½¿ç”¨create-react-appåˆå§‹åŒ–é¡¹ç›®,å…¶ä¸­è¸©äº†ä¸€äº›å‘,è®°å½•åœ¨æ­¤,ä»¥åšåç»­æŸ¥çœ‹â€¦</p>
</blockquote>
<h5 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h5><p>æ ¹æ®é¡¹ç›®éœ€æ±‚,ç¬¬ä¸€æ­¥éœ€ä½¿ç”¨è‡ªå®šä¹‰çš„å­—ä½“,æ ¹æ®å®˜æ–¹æ–‡æ¡£<a href="https://material-ui.com/zh/customization/typography/" target="_blank" rel="noopener">typography</a>.æŒ‰ç…§æ­¤æ–¹å¼é…ç½®,çš†æ— æ³•ä½¿å­—ä½“é—®é¢˜æ–‡ä»¶ç”Ÿæ•ˆ.(æ˜¯æœ¬åœ°çš„å­—ä½“,ä¸æ˜¯Google font)åœ¨ä¸€ç•ªæœç´¢å,ä¹Ÿè®¸æ˜¯åº”ä¸ºç‰ˆæœ¬åŸå› ,æˆ–è€…å…¶ä»–åŸå› ,å¯ä»¥åœ¨æ­¤<a href="https://github.com/google/material-design-icons/issues/205" target="_blank" rel="noopener">github issues</a>çœ‹åˆ°æœ‰å¾ˆå¤šæœ‹å‹å‡é‡è§äº†æ­¤ç•ªé—®é¢˜,å‚ç…§ä¹‹å,ä¹Ÿæ²¡æœ‰å®é™…è§£å†³</p>
<h5 id="è½¬æœºå‡ºç°"><a href="#è½¬æœºå‡ºç°" class="headerlink" title="è½¬æœºå‡ºç°"></a>è½¬æœºå‡ºç°</h5><p>æŒ‰ç…§å®˜æ–¹ä½¿ç”¨Robotoçš„å­—ä½“,éœ€è¦åœ¨index.htmlå¼•å…¥æ­¤æ–‡ä»¶  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&amp;display=swap&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨Chromeæµè§ˆå™¨çœ‹äº†ä¸€ä¸‹,å…¶åŠ è½½äº†ä¸€ä¸ªcssæ–‡ä»¶,å†…å®¹å¦‚ä¸‹</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* cyrillic-ext */</span></span><br><span class="line">@<span class="keyword">font-face</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">'Roboto'</span>;</span><br><span class="line">  <span class="attribute">font-style</span>: normal;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">400</span>;</span><br><span class="line">  <span class="attribute">src</span>: <span class="built_in">local</span>(<span class="string">'Roboto'</span>), <span class="built_in">local</span>(<span class="string">'Roboto-Regular'</span>), <span class="built_in">url</span>(https://fonts.gstatic.com/s/roboto/v20/KFOmCnqEu92Fr1Mu72xKKTU1Kvnz.woff2) <span class="built_in">format</span>(<span class="string">'woff2'</span>);</span><br><span class="line">  <span class="attribute">unicode-range</span>: U+<span class="number">0460</span>-<span class="number">052</span>F, U+<span class="number">1</span>C80-<span class="number">1</span>C88, U+<span class="number">20</span>B4, U+<span class="number">2</span>DE0-<span class="number">2</span>DFF, U+A640-A69F, U+FE2E-FE2F;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* cyrillic */</span></span><br><span class="line">@<span class="keyword">font-face</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">'Roboto'</span>;</span><br><span class="line">  <span class="attribute">font-style</span>: normal;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">400</span>;</span><br><span class="line">  <span class="attribute">src</span>: <span class="built_in">local</span>(<span class="string">'Roboto'</span>), <span class="built_in">local</span>(<span class="string">'Roboto-Regular'</span>), <span class="built_in">url</span>(https://fonts.gstatic.com/s/roboto/v20/KFOmCnqEu92Fr1Mu5mxKKTU1Kvnz.woff2) <span class="built_in">format</span>(<span class="string">'woff2'</span>);</span><br><span class="line">  <span class="attribute">unicode-range</span>: U+<span class="number">0400</span>-<span class="number">045</span>F, U+<span class="number">0490</span>-<span class="number">0491</span>, U+<span class="number">04</span>B0-<span class="number">04</span>B1, U+<span class="number">2116</span>;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>é‚£æˆ‘æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥å»ºç«‹ä¸€ä¸ªæ–‡ä»¶æŒ‰ç…§æ­¤ç§æ–¹å¼å¼•å…¥å‘¢?</p>
<p>äºæ˜¯ä»¿ç…§ä¸Šè¿°,åœ¨index.cssåŠ å…¥å­—ä½“çš„åº”ç”¨,æœ€ç»ˆå®ç°è‡ªå®šä¹‰çš„å­—ä½“åŠ å…¥material-ui</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">'Gliber'</span>;</span><br><span class="line">    <span class="attribute">font-style</span>: normal;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">400</span>;</span><br><span class="line">    <span class="attribute">font-display</span>: swap;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">'./theme/Gilbert_Bold-Preview_1004.woff2'</span>) <span class="built_in">format</span>(<span class="string">'woff2'</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><ul>
<li>ç»è¿‡æ‘¸ç´¢,å¦‚åœ¨index.cssä¸­åŠ å…¥äº†è‡ªå®šä¹‰å­—ä½“,åˆ™åœ¨themeä¸­æ— éœ€æŒ‰ç…§å®˜æ–¹çš„æ–¹æ³•å†æ¬¡åœ¨theme.jsä¸­å¼•å…¥å­—ä½“äº†,æŒ‰ç…§å¦‚ä¸‹æ ¼å¼å¼•å…¥å³å¯</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> typography = &#123;</span><br><span class="line">  fontFamily: [<span class="string">"Gliber"</span>,<span class="string">"Roboto"</span>].join(<span class="string">","</span>),<span class="comment">//è¿™é‡Œå¼•å…¥è‡ªå®šä¹‰çš„å­—ä½“åå­—,å¹¶æ”¾åœ¨ç¬¬ä¸€</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>å¦‚æœéœ€è¦å¯»æ‰¾æ›´å¤šçš„å­—ä½“,å¯åœ¨<a href="https://fonts.google.com/" target="_blank" rel="noopener">google fonts(è‡ªå¸¦æ¢¯å­)</a>å¯»æ‰¾,æŒ‰ç…§Robotoçš„å­—ä½“æ–¹å¼å¼•å…¥å³å¯.ç»è¿‡æµ‹è¯•,å­—ä½“çš„ä½¿ç”¨å¯ä¸ç”¨æ¢¯å­</li>
<li>é¡ºå¸¦åœ¨stackoverflowå¼€å¯äº†ç¬¬ä¸€ä¸ªè§£ç­”<a href="https://stackoverflow.com/questions/57108085/self-host-font-added-in-material-ui-not-working/57450653#57450653" target="_blank" rel="noopener">Self-host font added in Material-UI not working?
</a></li>
</ul>
<h5 id="ç»“æœæ¼”ç¤º"><a href="#ç»“æœæ¼”ç¤º" class="headerlink" title="ç»“æœæ¼”ç¤º"></a>ç»“æœæ¼”ç¤º</h5><p><a href="https://github.com/shaokun11/material-ui-learn/tree/v1.0" target="_blank" rel="noopener">æºç </a><br><img src="/react/material-ui-font.gif" alt="material-ui self host font"> </p>
<h5 id="å…³äºæˆ‘"><a href="#å…³äºæˆ‘" class="headerlink" title="å…³äºæˆ‘"></a>å…³äºæˆ‘</h5><p>åŒºå—é“¾æŠ€æœ¯ç—´è¿·çš„ç¨‹åºçŒ¿ä¸€æšï¼Œå¦‚æœä½ å–œæ¬¢æˆ‘çš„æ–‡ç« ï¼Œå¯ä»¥åŠ ä¸Šå¾®ä¿¡å…±åŒå­¦ä¹ ï¼Œå…±åŒè¿›æ­¥ã€‚  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/12/æˆ‘åº”è¯¥æ€æ ·å­¦ä¹ eosæ™ºèƒ½åˆçº¦çš„å¼€å‘/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shaokun">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hello shaokun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/12/æˆ‘åº”è¯¥æ€æ ·å­¦ä¹ eosæ™ºèƒ½åˆçº¦çš„å¼€å‘/" itemprop="url">æˆ‘åº”è¯¥æ€æ ·å­¦ä¹ eosæ™ºèƒ½åˆçº¦çš„å¼€å‘?</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-06-12T21:19:18+08:00">
                2019-06-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><ul>
<li>æœ€è¿‘è¿˜æœ‰è®¸å¤šæœ‹å‹é€šè¿‡å¾®ä¿¡åŠ æˆ‘å¥½å‹,çœ‹æ¥è¶Šæ¥è¶Šå¤šçš„äººåœ¨å­¦ä¹ åŒºå—é“¾äº†,å¸Œæœ›æ–‡ç« èƒ½å¤Ÿå¸®åŠ©åˆ°ä½ ä»¬</li>
</ul>
<h4 id="åˆè¡·"><a href="#åˆè¡·" class="headerlink" title="åˆè¡·"></a>åˆè¡·</h4><ul>
<li>å½“æ—¶eoså‡ºæ¥çš„æ—¶å€™,æˆ‘æ‰å¼€å§‹å­¦ä¹ eosçš„æ™ºèƒ½åˆçº¦å¼€å‘,é‚£æ—¶å€™æˆ‘æ‰¾å¾—åˆ°çš„å”¯ä¸€çš„å­¦ä¹ èµ„æ–™å°±æ˜¯å®˜ç½‘çš„hello worldäº†.ä½†æ˜¯eosçš„ç‰ˆæœ¬(ç›®å‰1.8äº†,cdt 1.6çš„æ›´æ–°å¾—éå¸¸å¿«,è€Œå®˜ç½‘çš„æ–‡ç« ä¹Ÿæ²¡æ¥çš„åŠæ›´æ–°,é‚£æ—¶å€™Googleä¹Ÿæ‰¾ä¸åˆ°ç»™æ–°æ‰‹å…¥é—¨çš„èµ„æ–™,æ‰€ä»¥æˆ‘å°±å‡†å¤‡æŠŠè‡ªå·±å­¦ä¹ çš„ä¸€äº›ç»éªŒå’Œèµ„æ–™åˆ†äº«ç»™å¤§å®¶,å¸Œæœ›ä½ ä»¬èƒ½å¤Ÿå¿«é€Ÿå…¥é—¨,å°‘èµ°å¼¯è·¯</li>
</ul>
<h4 id="è¸©è¿‡çš„å‘"><a href="#è¸©è¿‡çš„å‘" class="headerlink" title="è¸©è¿‡çš„å‘"></a>è¸©è¿‡çš„å‘</h4><ul>
<li>è‡³äºç¬¬ä¸€ç¯‡eosçš„æ–‡ç« ,æ˜¯è®²è¿°scatterå¦‚ä½•ä½¿ç”¨,åˆšå¼€å§‹å†™æ–‡ç« ,æ€•æ–‡å­—æè¿°å¾—ä¸å¤Ÿæ¸…æ¥š,å°±ä¸€æ­¥ä¸€æ­¥æˆªå›¾(ç°åœ¨æƒ³æƒ³çœŸå‚»).ç”±äºmacçš„åŸå› ,æˆªçš„å›¾ç‰‡æ˜¯é«˜æ¸…çš„,æœ€ç»ˆå¯¼è‡´å›¾ç‰‡ä¸Šä¼ ä¸Šå»å¤ªå¤§äº†,åŸºæœ¬ä¸Šä¸€å¼ å›¾å°±ä¸€ä¸ªè§†çª—äº†,çœ‹èµ·æ¥çœŸæªå¿ƒ.</li>
<li>æœ€ç»ˆæƒ³äº†æƒ³,è¿™æ ·è¿˜æ˜¯ä¸è¡Œå‘¢,æ‰€ä»¥åˆå»æ‰¾äº†ä¸ªgifçš„å›¾ç‰‡æ”¾ä¸Šå»,è¿™æ ·åŸºæœ¬ä¸Šå°±å‡å°‘äº†æ–‡ç« çš„é•¿åº¦.ä½†æ˜¯æ˜¯æ— å£°çš„,è™½ç„¶è¿˜æ˜¯ä¸å¤Ÿè§†é¢‘æ¥å¾—æœ‰æ„Ÿè§‰,ä½†æ˜¯æˆ‘å°½é‡åšåˆ°è¯¦ç»†,å¤§å®¶å¦‚æœè·³è¿‡äº†,å¯ä»¥å¤šçœ‹ä¸¤éåº”è¯¥æ¯”ç›´æ¥çœ‹å›¾æ¥å¾—å¥½</li>
<li>å·¥å…·å°±è¿™æ ·å®šäº†,ç„¶åå°±æ˜¯eosioçš„ç‰ˆæœ¬,ç”±äºä¹‹å‰å¯¹ç‰ˆæœ¬çš„è®¤çŸ¥ä¸å¤Ÿ,ä¹Ÿæ€ªè‡ªå·±çš„æŠ€æœ¯å¼±é¸¡,è¿™å…¶ä¸­å°±åœ¨çº ç»“æ€ä¹ˆè£…å¥½eos,eosio.cdt,ç°åœ¨æ€»ç»“èµ·æ¥å…¶å®å°±æ˜¯æ¢¯å­ä¸å¤Ÿé«˜</li>
<li>â€¦</li>
</ul>
<h4 id="ä½ åº”è¯¥åšçš„"><a href="#ä½ åº”è¯¥åšçš„" class="headerlink" title="ä½ åº”è¯¥åšçš„"></a>ä½ åº”è¯¥åšçš„</h4><ol start="0">
<li><strong>ä¸ç”¨å†çœ‹æœ¬ç³»åˆ—çš„æ–‡ç« äº†,æ‰€æœ‰çš„æ–‡ç« éƒ½å·²ç»è¿‡æ—¶äº†</strong></li>
<li>å¦‚æœä½ æ˜¯å…¥é—¨eosçš„æ™ºèƒ½åˆçº¦çš„å¼€å‘,å®˜ç½‘çš„æ•™ç¨‹æ°¸è¿œæ˜¯æœ€å¥½çš„å…¥é—¨èµ„æ–™â€”&gt;<a href="https://developers.eos.io/eosio-home/docs" target="_blank" rel="noopener">eosio developter</a> </li>
<li>å®˜ç½‘çš„ä¾‹å­å­¦ä¹ å®Œ,ä½ å¯ä»¥å‚è€ƒè¿™ä½å¤§ä½¬â€“&gt;<a href="https://shimo.im/docs/jt2MhxPYTKI6tWnp/read" target="_blank" rel="noopener">eosæ™ºèƒ½åˆçº¦å¼€å‘æ•™ç¨‹</a>çš„ç³»åˆ—æ–‡ç« .è¿™ä½å¤§ä½¬çš„æ–‡ç« æ—¢æœ‰æºç åˆ†æ,ä¹Ÿæœ‰c++çŸ¥è¯†,Linuxçš„è®²è§£,è¿˜æœ‰webå‰ç«¯çš„çŸ¥è¯†,æ›´æœ‰nodeåç«¯çš„åˆ†æ,ç”šè‡³è¿˜æœ‰IPFSçš„åˆ†æ,filecoinçš„ç©æ³•.æ‰€ä»¥ä½ æ˜¯ä¸åº”è¯¥é”™è¿‡è¿™ä¸€äº›çš„æ–‡ç« çš„</li>
<li>ç°åœ¨eosçš„å®‰è£…ä¹Ÿæ–¹ä¾¿äº†,dockerç›´æ¥æå®š,å¦‚æœä¸å–œæ¬¢èµ°docker,å¯ä»¥æ¥è¿™é‡Œçœ‹çœ‹<a href="https://github.com/EOSIO/eos" target="_blank" rel="noopener">eosio github</a></li>
<li>å°å·¥å…·,å¯ä»¥å®Œå…¨ä»£æ›¿cleos,ä¸»è¦æ˜¯å®‰è£…æ¯”è¾ƒç®€å•,å¦‚æœä¸è·‘æœ¬åœ°çš„ç½‘ç»œ,å®Œå…¨åœ¨æµ‹è¯•ç½‘ç»œä¸Šè¿è¡Œ,å¯ä»¥ä¸€è¯•<a href="https://eosc.app/" target="_blank" rel="noopener">The most flexible &amp; powerful command line tool for any developer to interact with an EOSIO chain</a></li>
<li>ç½‘ç»œé€‰æ‹©,æµ‹è¯•ç½‘å›½å†…å»ºè®®<a href="https://kylin.eosx.io/" target="_blank" rel="noopener">kylin test</a>,å›½å¤–å»ºè®®<a href="https://monitor.jungletestnet.io/" target="_blank" rel="noopener">jugle2 testnet </a>,æ¢¯å­è¶³å¤Ÿé«˜çš„éšæ„é€‰æ‹©,å¦‚æœå®‰è£…äº†eos,ç›´æ¥æœ¬åœ°è¿è¡Œå§</li>
<li>å¼€å‘IDE ç¬¬ä¸€ä¸ªâ€“&gt;<a href="https://www.eosstudio.io/" target="_blank" rel="noopener">eos stdudio</a>,è¿™ä¸ªæ˜¯æœ¬åœ°ç‰ˆæœ¬çš„,å„ä¸ªæ“ä½œç³»ç»Ÿéƒ½æœ‰,  ç¬¬äºŒä¸ªâ€“&gt;<a href="https://beosin.com/BEOSIN-IDE/index.html" target="_blank" rel="noopener">beosin</a> ç±»ä¼¼ä»¥å¤ªä¸Šçš„remix, æˆ‘é€‰æ‹©çš„æ˜¯vscode</li>
<li>å°å·¥å…·,jsæ“ä½œeos <a href="[js4eos](https://github.com/itleaks/js4eos">js4eos</a>)</li>
</ol>
<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>eosç½‘ç»œå·²ç»è¿è¡Œä¸€å¹´äº†,ç„¶è€Œæˆ‘çš„æŠ€æœ¯å´è¿˜æ˜¯æ²¡æœ‰è¿›æ­¥,çº ç»“ing ^_^<br>å¦‚æœä½ ä¹Ÿå¯¹åŒºå—é“¾æŠ€æœ¯æ„Ÿå…´è¶£,åŒ…æ‹¬ä½†ä¸å±€é™äºeos,å¯ä»¥åŠ ä¸ªå¾®ä¿¡å¥½å‹å…±åŒæ¢è®¨å­¦ä¹ ï¼ˆåŠ å¥½å‹æ—¶ï¼Œè¯·å¤‡æ³¨ åŒºå—é“¾ï¼Œè°¢è°¢ï¼‰  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/02/eosio.token transfer actionæ­£ç¡®çš„ä½¿ç”¨æ–¹å¼/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shaokun">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hello shaokun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/02/eosio.token transfer actionæ­£ç¡®çš„ä½¿ç”¨æ–¹å¼/" itemprop="url">eosio.token transferæ­£ç¡®çš„ä½¿ç”¨æ–¹å¼</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-03-02T21:30:27+08:00">
                2019-03-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><ul>
<li>é¢,æ­£ç¡®ä½¿ç”¨çš„æ–¹å¼ä¸å°±æ˜¯è½¬è´¦å—?ç›´æ¥è°ƒç”¨ä¸å°±å¯ä»¥äº†?</li>
<li>æ˜¯çš„,å°±æ˜¯è½¬è´¦,ä½†æ˜¯<ol>
<li>æˆ‘è¦åœ¨è´¦å·ä¸­çš„åˆçº¦ä¸­æ‰§è¡Œè½¬è´¦(è¿™ä¸ªä¹‹å‰çš„æ–‡ç« å·²ç»å®ç°äº†,ä¸æ˜¯æœ¬ç¯‡æ–‡ç« çš„é‡ç‚¹)</li>
<li>åŒæ—¶æ‰§è¡Œä¸€ä¸ªgreet(std::string msg) actionå‘¢?</li>
<li>å½“å…¶ä»–ä»»ä½•ç©å®¶è½¬è´¦ç»™æˆ‘,æˆ‘è¦çŸ¥é“è½¬è´¦çš„æ•°æ®,åŒæ—¶ç»™æˆ‘æå¥è¯å‘¢</li>
</ol>
</li>
<li>é‚£å°±ä½¿ç”¨ä¸€ä¸ªactionè½¬è´¦,ä¸€ä¸ªaction greet(msg)!!!</li>
<li>ç›®çš„æ˜¯åˆ°äº†å‘¢,ä½†æ˜¯è¿™ä¸ªæ˜¯ä¸¤ä¸ªactionå‘¢?é‚£å°±æ˜¯æœ‰æ—¶é—´å·®çš„,è²Œä¼¼ä¸ç¬¦åˆæˆ‘çš„éœ€æ±‚å“¦,é‚£è¯¥æ€ä¹ˆåŠå‘¢?</li>
<li>å¥½çš„,å¦‚æœä½ çœ‹è¿‡ä¹‹å‰çš„æ–‡ç« ,å…¶å®ä½ å·²ç»æ˜ç™½æ€ä¹ˆåšäº†,è‡ªå®šä¹‰dispatcherè¿™ä¸ªå®</li>
<li>æ˜¯çš„,å®Œå…¨æ­£ç¡®,é‚£ä¹ˆæœ¬ç¯‡æ–‡ç« å°±æ˜¯æ¥ç€ä¹‹å‰çš„æ–‡ç« è€Œæ¥,æŠŠæ•°æ®è®°å½•èµ·æ¥</li>
</ul>
<h4 id="æ¸¸æˆè®¾è®¡"><a href="#æ¸¸æˆè®¾è®¡" class="headerlink" title="æ¸¸æˆè®¾è®¡"></a>æ¸¸æˆè®¾è®¡</h4><ul>
<li>æœ¬æ¬¡çš„åˆçº¦æ¥ç©ä¸€ä¸ªæ¸¸æˆå«åš:paymsg</li>
<li>æ¸¸æˆè§„åˆ™:<ul>
<li>ä»»ä½•äººå‡å¯ä»¥å‚åŠ æ¸¸æˆ,æ¯æ¬¡å‚åŠ è‡³å°‘æ¸¸æˆéœ€èŠ±è´¹1eos</li>
<li>èŠ±è´¹äº†è¿™ä¸ªè´¹ç”¨çš„ç©å®¶ åˆçº¦ä¼šè‡ªåŠ¨å°†ä»–è½¬è´¦çš„memoå‚¨å­˜åœ¨åŒºå—é“¾ä¸­,ä½†æ˜¯ä¼šåŠ ä¸Šæˆ‘çš„ç­¾å</li>
<li>å½“ç„¶,å½“ä½ èŠ±è´¹è¶…è¿‡5ä¸ªeosæ—¶,å°†ä¼šæœ‰ä¸€æ¬¡å…è´¹çš„æœºä¼šå†æ¬¡æ›´æ–°ä½ å‚¨å­˜çš„ä¿¡æ¯<h4 id="åˆçº¦è®¾è®¡"><a href="#åˆçº¦è®¾è®¡" class="headerlink" title="åˆçº¦è®¾è®¡"></a>åˆçº¦è®¾è®¡</h4></li>
</ul>
</li>
<li>åˆçº¦çš„å…·ä½“è®¾è®¡è¯·çœ‹æºç å°±å¯ä»¥äº†<ol>
<li>æ‹¦æˆªtransferæ–¹æ³•,è·å–è½¬è´¦ä¿¡æ¯</li>
<li>è®°ä½ååºåˆ—åŒ–çš„æ—¶å€™,éœ€è¦å»ºä¸€ä¸ªstructæ¥æ‰¿è½½æ•°æ®çš„ä¿¡æ¯ </li>
<li>è®¾è®¡ä¸€ä¸ªå¯¹å¤–çš„actionç”¨äº ç”¨æˆ·å…è´¹æ›´æ–°å‚¨å­˜çš„ä¿¡æ¯</li>
<li>æ­¤åˆçº¦åªæ˜¯demo,ä»…ä¾›å‚è€ƒ</li>
</ol>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">[[eosio::action]]</span><br><span class="line">void upmsg(name player, std::string msg) &#123;</span><br><span class="line">  require_auth(player);</span><br><span class="line">  // è¿™ä¸ªåœ°æ–¹å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼åˆå§‹åŒ–table çœŸä¸çŸ¥é“æ˜¯å“ªé‡Œé†‰äº†</span><br><span class="line">  paymessage_index paymessages(get_self(), _code.value);</span><br><span class="line">  auto iterator = paymessages.find(player.value);</span><br><span class="line">  eosio_assert(iterator != paymessages.end(), &quot;you are not in shaokun paymsg game&quot;);</span><br><span class="line">  eosio_assert(iterator-&gt;uamount &gt;= 50000, &quot;you must send more than 5 eos that can update your msg&quot;);</span><br><span class="line">  paymessages.modify(iterator, player, [&amp;]( auto&amp; row ) &#123;</span><br><span class="line">      row.player = player;</span><br><span class="line">      row.msg = msg;</span><br><span class="line">      row.uamount = 0;  //ç½®ä¸º0 ,ä¸‹æ¬¡æ›´æ”¹å¿…é¡»èŠ±5eosä»¥ä¸Š</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void transfer()&#123;</span><br><span class="line">  // ååºåˆ—åŒ–å¾—åˆ°st_transferç»“æ„ä½“å¯¹è±¡</span><br><span class="line">  // å°±å¯ä»¥æ‹¿åˆ°transferçš„äº¤æ˜“ä¿¡æ¯äº†,è€Œä¸”æ˜¯eosio.tokenå‘è¿‡çš„transfer</span><br><span class="line">  auto transfer_data = unpack_action_data&lt;st_transfer&gt;();</span><br><span class="line">  // eosæ˜¯4ä½å°æ•°,ç”±äºä¸æ”¯æŒå®é™…æ„ä¹‰ä¸Šçš„å°æ•°,æ‰€ä»¥è¿™é‡Œè¦ä½¿ç”¨æ•´å½¢10000ä»£æ›¿1eos</span><br><span class="line">  eosio_assert(transfer_data.quantity.amount &gt;= 10000, &quot;must more than 1 eos provide&quot;);</span><br><span class="line">  auto tr_from = transfer_data.from;</span><br><span class="line">  if(tr_from == get_self()) &#123;</span><br><span class="line">      //è‡ªå·±è½¬å‡ºå»å°±ä¸éœ€è¦å‚åŠ æ¸¸æˆäº†</span><br><span class="line">      return;</span><br><span class="line">  &#125;</span><br><span class="line">  auto tr_amount = transfer_data.quantity.amount;</span><br><span class="line">  // https://github.com/EOSIO/eosio.cdt/blob/master/libraries/eosiolib/symbol.hpp</span><br><span class="line">  if(transfer_data.quantity.symbol != eosio::symbol(&quot;EOS&quot;,4))&#123;</span><br><span class="line">      // æˆ‘ä»¬åªæ”¶eos</span><br><span class="line">      return;</span><br><span class="line">  &#125;</span><br><span class="line">  auto tr_memo = transfer_data.memo;</span><br><span class="line">  // è¿™é‡Œä¸€å®šè¦æŒ‰ç…§è¿™æ ·çš„æ ¼å¼åˆå§‹åŒ–table,ä¸ç„¶æ— æ³•å†™å…¥æ•°æ®</span><br><span class="line">  // ç†è®ºä¸Šè¿™ç§æ–¹å¼åˆå§‹åŒ–çš„tableæƒé™æ˜¯ä¸€æ ·çš„å‘¢ paymessage_index paymessages(get_self(), _code.value);</span><br><span class="line">  paymessage_index paymessages(get_self(), get_self().value);</span><br><span class="line">  auto itr = paymessages.find(transfer_data.from.value);</span><br><span class="line">  if (itr == paymessages.end())&#123;</span><br><span class="line">      paymessages.emplace(get_self(), [&amp;]( auto&amp; row ) &#123;</span><br><span class="line">          row.player = tr_from;</span><br><span class="line">          row.uamount = tr_amount;</span><br><span class="line">          row.tamount = tr_amount;</span><br><span class="line">          row.msg = &quot;welcome to shaokun paygame, your pay msg is :&quot; + tr_memo;</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;else &#123;</span><br><span class="line">      paymessages.modify(itr, get_self(), [&amp;]( auto&amp; row ) &#123;</span><br><span class="line">          row.tamount += tr_amount;</span><br><span class="line">          row.uamount += tr_amount ;</span><br><span class="line">          row.msg = &quot;welcome come back to shaokun paygame:&quot;+ tr_memo;</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ç¼–è¯‘-éƒ¨ç½²-éªŒè¯"><a href="#ç¼–è¯‘-éƒ¨ç½²-éªŒè¯" class="headerlink" title="ç¼–è¯‘,éƒ¨ç½²,éªŒè¯"></a>ç¼–è¯‘,éƒ¨ç½²,éªŒè¯</h4><ul>
<li>ç¼–è¯‘,ä¹°RAM,éƒ¨ç½²</li>
<li>ä½¿ç”¨shaokunpay11éƒ¨ç½²åˆçº¦</li>
<li>ä½¿ç”¨eostoday1235è¿›è¡Œæ·»åŠ æ•°æ®</li>
<li><p>ä½¿ç”¨eostoday1235è¿›è¡Œä¸¤æ¬¡çš„upmsgè¿›è¡Œä¿®æ”¹æ•°æ®</p>
<p><img src="/img_eos1/eos_gif_3.gif" alt="shaokun"></p>
</li>
<li><p><a href="https://github.com/shaokun11/eosabout.git" target="_blank" rel="noopener">æºç </a></p>
</li>
</ul>
<h4 id="å¡«å‘"><a href="#å¡«å‘" class="headerlink" title="å¡«å‘"></a>å¡«å‘</h4><ul>
<li>ä¹‹å‰æœ‰ä¸€ä¸ªå›°æƒ‘çš„é—®é¢˜æ˜¯å…³äºscatterå’Œeosjs2æ— æ³•ä¸€èµ·ä½¿ç”¨,å®˜æ–¹ä¹Ÿæ²¡æœ‰ä¾‹å­,è€Œç°åœ¨æ‰¾åˆ°äº†<a href="https://github.com/GetScatter/scatter-js" target="_blank" rel="noopener">github</a></li>
<li>ä»¥ä¸‹æˆ‘åªæ˜¯æ¬è¿å·¥ ^.^</li>
<li>scatter + eosjs2  </li>
<li>npm i -S scatterjs-core scatterjs-plugin-eosjs2 <a href="mailto:eosjs@20.0.0-beta3" target="_blank" rel="noopener">eosjs@20.0.0-beta3</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">import ScatterJS from &apos;scatterjs-core&apos;;</span><br><span class="line">import ScatterEOS from &apos;scatterjs-plugin-eosjs2&apos;;</span><br><span class="line">import &#123;JsonRpc, Api&#125; from &apos;eosjs&apos;;</span><br><span class="line"></span><br><span class="line">ScatterJS.plugins( new ScatterEOS() );</span><br><span class="line"></span><br><span class="line">const network = ScatterJS.Network.fromJson(&#123;</span><br><span class="line">    blockchain:&apos;eos&apos;,</span><br><span class="line">    chainId:&apos;aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906&apos;,</span><br><span class="line">    host:&apos;nodes.get-scatter.com&apos;,</span><br><span class="line">    port:443,</span><br><span class="line">    protocol:&apos;https&apos;</span><br><span class="line">&#125;);</span><br><span class="line">const rpc = new JsonRpc(network.fullhost());</span><br><span class="line"></span><br><span class="line">ScatterJS.connect(&apos;hello shaokun&apos;, &#123;network&#125;).then(connected =&gt; &#123;</span><br><span class="line">    if(!connected) return console.error(&apos;no scatter&apos;);</span><br><span class="line"></span><br><span class="line">    const eos = ScatterJS.eos(network, Api, &#123;rpc, beta3:true&#125;);</span><br><span class="line"></span><br><span class="line">    ScatterJS.login().then(id =&gt; &#123;</span><br><span class="line">        if(!id) return console.error(&apos;no identity&apos;);</span><br><span class="line">        const account = ScatterJS.account(&apos;eos&apos;);</span><br><span class="line"></span><br><span class="line">        eos.transact(&#123;</span><br><span class="line">            actions: [&#123;</span><br><span class="line">                account: &apos;eosio.token&apos;,</span><br><span class="line">                name: &apos;transfer&apos;,</span><br><span class="line">                authorization: [&#123;</span><br><span class="line">                    actor: account.name,</span><br><span class="line">                    permission: account.authority,</span><br><span class="line">                &#125;],</span><br><span class="line">                data: &#123;</span><br><span class="line">                    from: account.name,</span><br><span class="line">                    to: &apos;safetransfer&apos;,</span><br><span class="line">                    quantity: &apos;0.0001 EOS&apos;,</span><br><span class="line">                    memo: account.name,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            blocksBehind: 3,</span><br><span class="line">            expireSeconds: 30,</span><br><span class="line">        &#125;).then(res =&gt; &#123;</span><br><span class="line">            console.log(&apos;sent: &apos;, res);</span><br><span class="line">        &#125;).catch(err =&gt; &#123;</span><br><span class="line">            console.error(&apos;error: &apos;, err);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>scatter + eosjs1  </li>
<li>npm i -S scatterjs-core scatterjs-plugin-eosjs <a href="mailto:eosjs@16.0.9" target="_blank" rel="noopener">eosjs@16.0.9</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">import ScatterJS from &apos;scatterjs-core&apos;;</span><br><span class="line">import ScatterEOS from &apos;scatterjs-plugin-eosjs&apos;;</span><br><span class="line">import Eos from &apos;eosjs&apos;;</span><br><span class="line"></span><br><span class="line">ScatterJS.plugins( new ScatterEOS() );</span><br><span class="line"></span><br><span class="line">const network = ScatterJS.Network.fromJson(&#123;</span><br><span class="line">    blockchain:&apos;eos&apos;,</span><br><span class="line">    chainId:&apos;aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906&apos;,</span><br><span class="line">    host:&apos;nodes.get-scatter.com&apos;,</span><br><span class="line">    port:443,</span><br><span class="line">    protocol:&apos;https&apos;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">ScatterJS.connect(&apos;YourAppName&apos;, &#123;network&#125;).then(connected =&gt; &#123;</span><br><span class="line">    if(!connected) return console.error(&apos;no scatter&apos;);</span><br><span class="line"></span><br><span class="line">    const eos = ScatterJS.eos(network, Eos);</span><br><span class="line"></span><br><span class="line">    ScatterJS.login().then(id =&gt; &#123;</span><br><span class="line">        if(!id) return console.error(&apos;no identity&apos;);</span><br><span class="line">        const account = ScatterJS.account(&apos;eos&apos;);</span><br><span class="line">        const options = &#123;authorization:[`$&#123;account.name&#125;@$&#123;account.authority&#125;`]&#125;;</span><br><span class="line">        eos.transfer(account.name, &apos;safetransfer&apos;, &apos;0.0001 EOS&apos;, account.name, options).then(res =&gt; &#123;</span><br><span class="line">            console.log(&apos;sent: &apos;, res);</span><br><span class="line">        &#125;).catch(err =&gt; &#123;</span><br><span class="line">            console.error(&apos;error: &apos;, err);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>scatter + web3</li>
<li>npm i -S scatterjs-core scatterjs-plugin-web3 web3</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">import ScatterJS from &apos;scatterjs-core&apos;;</span><br><span class="line">import ScatterETH from &apos;scatterjs-plugin-web3&apos;;</span><br><span class="line">import Web3 from &apos;web3&apos;;</span><br><span class="line"></span><br><span class="line">ScatterJS.plugins( new ScatterETH() );</span><br><span class="line"></span><br><span class="line">const network = ScatterJS.Network.fromJson(&#123;</span><br><span class="line">    blockchain:&apos;eth&apos;,</span><br><span class="line">    chainId:&apos;1&apos;,</span><br><span class="line">    host:&apos;YOUR ETHEREUM NODE&apos;,</span><br><span class="line">    port:443,</span><br><span class="line">    protocol:&apos;https&apos;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">ScatterJS.connect(&apos;YourAppName&apos;, &#123;network&#125;).then(connected =&gt; &#123;</span><br><span class="line">    if(!connected) return console.error(&apos;no scatter&apos;);</span><br><span class="line"></span><br><span class="line">    const web3 = ScatterJS.web3(network, Web3);</span><br><span class="line"></span><br><span class="line">    ScatterJS.login().then(id =&gt; &#123;</span><br><span class="line">        if(!id) return console.error(&apos;no identity&apos;);</span><br><span class="line">        // https://github.com/GetScatter/scatter-js/blob/master/packages/core/src/models/Blockchains.js</span><br><span class="line">        // è¿™é‡Œå®˜æ–¹åº”è¯¥å†™é”™äº†,æºç¨‹trxäº†,æˆ‘ä»¬æŠŠå®ƒæ”¹è¿‡æ¥</span><br><span class="line">        const account = ScatterJS.account(&apos;eth&apos;);</span><br><span class="line">        web3.eth.sendTransaction(&#123;</span><br><span class="line">            from: account.address,</span><br><span class="line">            to: &apos;0x...&apos;,</span><br><span class="line">            value: &apos;1000000000000000&apos;</span><br><span class="line">        &#125;).then(res =&gt; &#123;</span><br><span class="line">            console.log(&apos;sent: &apos;, res);</span><br><span class="line">        &#125;).catch(err =&gt; &#123;</span><br><span class="line">            console.error(&apos;error: &apos;, err);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>scatter + tronweb</li>
<li>npm i -S scatterjs-core scatterjs-plugin-tron tronweb</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">import ScatterJS from &apos;scatterjs-core&apos;;</span><br><span class="line">import ScatterTron from &apos;scatterjs-plugin-tron&apos;;</span><br><span class="line">import TronWeb from &apos;tronweb&apos;;</span><br><span class="line"></span><br><span class="line">ScatterJS.plugins( new ScatterTron() );</span><br><span class="line"></span><br><span class="line">const network = ScatterJS.Network.fromJson(&#123;</span><br><span class="line">    blockchain:&apos;tron&apos;,</span><br><span class="line">    chainId:&apos;1&apos;,</span><br><span class="line">    host:&apos;api.trongrid.io&apos;,</span><br><span class="line">    port:443,</span><br><span class="line">    protocol:&apos;https&apos;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const httpProvider = new TronWeb.providers.HttpProvider(network.fullhost());</span><br><span class="line">let tron = new TronWeb(httpProvider, httpProvider, network.fullhost());</span><br><span class="line">tron.setDefaultBlock(&apos;latest&apos;);</span><br><span class="line"></span><br><span class="line">ScatterJS.connect(&apos;YourAppName&apos;, &#123;network&#125;).then(connected =&gt; &#123;</span><br><span class="line">    if(!connected) return console.error(&apos;no scatter&apos;);</span><br><span class="line"></span><br><span class="line">    tron = ScatterJS.trx(network, tron);</span><br><span class="line"></span><br><span class="line">    ScatterJS.login().then(id =&gt; &#123;</span><br><span class="line">        if(!id) return console.error(&apos;no identity&apos;);</span><br><span class="line">        const account = ScatterJS.account(&apos;trx&apos;);</span><br><span class="line">        tron.trx.sendTransaction(&apos;TX...&apos;, 100).then(res =&gt; &#123;</span><br><span class="line">            console.log(&apos;sent: &apos;, res);</span><br><span class="line">        &#125;).catch(err =&gt; &#123;</span><br><span class="line">            console.error(&apos;error: &apos;, err);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><ul>
<li>è¿™æ ·å°±å®ç°äº†ä»¥å¤ªåŠpayableå…³é”®å­—çš„åŠŸèƒ½äº†</li>
<li>paymsgè¿™ä¸ªå°gameçš„é€»è¾‘,å…¶å®ä¹Ÿå’Œå¸‚é¢ä¸Šå¤§å¤šæ•°çš„è èœç±»æ¸¸æˆçš„å®ç°æ–¹å¼ç±»ä¼¼,åªæ˜¯å…¶ä¸­çš„è§„åˆ™å°‘äº†ç‚¹</li>
<li>è‡³æ­¤,åŸºäºeoså¼€å‘dappçš„æ‰€æœ‰æµç¨‹åŸºæœ¬ä¸Šæ˜¯è®²å®Œäº†</li>
<li>å½“ç„¶å…¶ä¸­æœ‰å¾ˆå¤šç‚¹æˆ‘ä¹Ÿæ²¡æœ‰è®²åˆ°,ä¸»è¦æ˜¯æˆ‘åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­,å…¶ä»–ç‚¹æ²¡æœ‰é‡åˆ°å¤ªå¤§çš„é—®é¢˜.æ¯”å¦‚è¯´multi_indexçš„æ“ä½œ</li>
<li>å…³äºæ„Ÿæƒ³,å°±æ˜¯è¦æœ‰è€å¿ƒå»å­¦ä¹ è¿™ä¸ª,å› ä¸ºç›®å‰ä¹Ÿæ²¡æœ‰å…¶ä»–çš„æ›´å¥½çš„èµ„æ–™,æˆ‘æ¯”è¾ƒæ¨èå®˜æ–¹çš„æ•™ç¨‹<a href="https://developers.eos.io/eosio-home/docs/introduction" target="_blank" rel="noopener">eos smart contract</a></li>
<li>è¿˜æœ‰ä¸€ç‚¹,å¦‚æœä½ ä½¿ç”¨eosiocppç¼–è¯‘wasm,abiæ–‡ä»¶,å†™åˆçº¦çš„æ—¶å€™,æœ‰æ—¶å€™éœ€è¦å‚è€ƒæºç <a href="https://sourcegraph.com/github.com/EOSIO/eos" target="_blank" rel="noopener">eosio</a>,å¦‚æœä½¿ç”¨eosio.cdtç¼–è¯‘çš„åˆçº¦,<a href="https://github.com/EOSIO/eosio.cdt/tree/master/libraries/eosiolib" target="_blank" rel="noopener">eosio.cdt eoslib</a>è¦å»è¿™é‡Œæ‰¾(ps:è¿™ä¸ªåœ°æ–¹å—è¿‡å¾ˆå¤šä¼¤â€¦)</li>
<li>æœ€å,ç¥å¤§å®¶å­¦çš„å¼€å¿ƒ</li>
</ul>
<h4 id="å…³äºæˆ‘"><a href="#å…³äºæˆ‘" class="headerlink" title="å…³äºæˆ‘"></a>å…³äºæˆ‘</h4><p>åŒºå—é“¾æŠ€æœ¯ç—´è¿·çš„ç¨‹åºçŒ¿ä¸€æšï¼Œå¦‚æœä½ å–œæ¬¢æˆ‘çš„æ–‡ç« ï¼Œå¯ä»¥åŠ ä¸Šå¾®ä¿¡å…±åŒå­¦ä¹ ï¼Œå…±åŒè¿›æ­¥ã€‚<br>email: <a href="mailto:&#x73;&#107;&#x75;&#110;&#x6e;&#121;&#64;&#x31;&#x36;&#x33;&#x2e;&#x63;&#x6f;&#109;" target="_blank" rel="noopener">&#x73;&#107;&#x75;&#110;&#x6e;&#121;&#64;&#x31;&#x36;&#x33;&#x2e;&#x63;&#x6f;&#109;</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/02/23/eosæµ‹è¯•ç½‘å‘è¡Œtoken/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shaokun">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hello shaokun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/23/eosæµ‹è¯•ç½‘å‘è¡Œtoken/" itemprop="url">ä¸€æ­¥ä¸€æ­¥æ•™ä½ åœ¨eosä¸»ç½‘ä¸Šå‘è¡Œè‡ªå·±çš„tokens</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-02-23T13:33:56+08:00">
                2019-02-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><ul>
<li>2019å¹´æ¥äº†,ç¥å¤§å®¶æ–°å¹´å¿«ä¹</li>
<li>æ–°çš„ä¸€å¹´æˆ‘ä»¬å¾—ç»§ç»­åŠªåŠ›å‘¢,å½“ç„¶æˆ‘ä¹Ÿå¾—ç»§ç»­æ¥å¡«å‘</li>
<li>æ¥ç€ä¸Šç¯‡æ–‡ç« æ¥,æœ¬ç¯‡æ–‡ç« ä¼šå¸¦ç€ä½ ä¸€æ­¥ä¸€æ­¥åœ¨æµ‹è¯•ç½‘(ä¸»ç½‘è¦çœŸé‡‘ç™½é“¶å‘¢)ä¸Šå‘è¡Œè‡ªå·±çš„token</li>
<li>æœ¬æ¥å®˜ç½‘çš„æ•™ç¨‹ä¸­å·²ç»æœ‰æ•™æ€ä¹ˆæ ·å‘è¡Œè‡ªå·±çš„tokenäº† <a href="https://developers.eos.io/eosio-home/docs/token-contract" target="_blank" rel="noopener">eosio token issue</a>,ä¸ºä»€ä¹ˆæˆ‘è¿˜è¦å†å†™ä¸€éå‘¢?</li>
<li>æˆ‘è§‰å¾—åœ¨æˆ‘å­¦ä¹ çš„è¿‡ç¨‹ä¸­é‡åˆ°äº†ä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜:<ol>
<li>æˆ‘æ²¡æœ‰eosio.tokençš„è´¦å·å‘¢,æˆ‘æ€ä¹ˆå‘è¡Œtokenå‘¢? </li>
<li>é‚£æˆ‘å°±ç”¨è‡ªå·±çš„accountè¿›è¡Œå‘å¸ƒ,é‚£è¿™æ ·çš„tokenå¯ä»¥ä½¿ç”¨å—?</li>
<li>å‘å¸ƒtokençš„åˆçº¦æ˜¯æ€ä¹ˆæ ·çš„å‘¢?</li>
</ol>
</li>
<li>è¯·è‡ªå¤‡æœ‰è¶³å¤Ÿramçš„kylinçš„è´¦å·å‘¢,ä¸ç„¶åé¢æ²¡æ³•èµ°å“ˆ</li>
</ul>
<h4 id="è·å–tokenæºç "><a href="#è·å–tokenæºç " class="headerlink" title="è·å–tokenæºç "></a>è·å–tokenæºç </h4><ul>
<li>ç›¸ä¿¡è·Ÿç€å®˜ç½‘èµ°å¾—åŒå­¦éƒ½æ˜¯åœ¨æœ¬åœ°çš„ç›®å½•ä¸­å»çœ‹æºç çš„,è¿™ä¸ªæºç ç‰ˆæœ¬ç›®å‰åªèƒ½ä½¿ç”¨eosiocppç¼–è¯‘,è€Œæˆ‘ç›®å‰éœ€è¦ä½¿ç”¨cdtæ¥ç¼–è¯‘å‘¢.</li>
<li>æ‰€ä»¥æˆ‘ä»¬å¾—æ¥è¿™é‡Œè·å–æ”¯æŒcdtçš„æºç <a href="https://github.com/EOSIO/eosio.contracts" target="_blank" rel="noopener">eosio.contracts</a>,è¿™é‡Œå­˜äº†ç³»ç»Ÿçš„çš„contractæºç ,æˆ‘ä»¬éœ€è¦eosio.tokençš„åˆçº¦æºç ,æˆ‘ä»¬ç¬¬ä¸€æ­¥å…ˆæŠŠå®ƒdownloadä¸‹æ¥</li>
<li>å»ºè®®ä¸ç”¨ä¿®æ”¹,é™¤éå¢åŠ æ–°çš„ä¸šåŠ¡é€»è¾‘</li>
</ul>
<h4 id="tokenæºç åˆ†æ"><a href="#tokenæºç åˆ†æ" class="headerlink" title="tokenæºç åˆ†æ"></a>tokenæºç åˆ†æ</h4><ul>
<li>æ–‡ä¸­æœ‰æ³¨é‡Šå°±ä¸å•°å—¦äº†,å„ä½åŒå­¦è‡ªå·±çœ‹å°±å¥½</li>
<li>å¦‚æœæœ‰åŒå­¦çœ‹è¿‡æ—§ç‰ˆtokençš„åˆçº¦,å¯ä»¥å‘ç°è¿˜æœ‰æœ‰äº›å˜åŒ–çš„.ä¸è¿‡æˆ‘ä»¬ä¸ç”¨careä¹‹å‰çš„æ—§ç‰ˆtokenåˆçº¦,ä½¿ç”¨æ–°ç‰ˆçš„å°±å¥½</li>
<li>tokenä¸­ä¸»è¦æœ‰ä¸¤ä¸ªtable,account å’Œ currency_stats  <ol>
<li>accountä¸»è¦è´Ÿè´£è®°å½•ç”¨æˆ·çš„ä½™é¢,è¿™ä¸ªtableå‚¨å­˜ä½™é¢å¾ˆæœ‰è¶£. ä½¿ç”¨ownerä½œä¸ºscope(è¿™é‡Œå¯ä»¥ç†è§£ä¸ºåœ¨è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªå•ç‹¬çš„å°table),ç„¶ååœ¨é‡Œé¢æ‰¾æœ‰æ²¡æœ‰å¯¹åº”çš„symbol(å‰æè¿™symbolå¾—é€šè¿‡currency_stats tableçš„æ£€æŸ¥,å³å·²ç»createçš„)</li>
<li>currency_statsä¸»è¦è´Ÿè´£è®°å½•å‘è¡Œçš„tokençš„ä¿¡æ¯,ä¸»è¦åŒ…æ‹¬æœ€å¤§å‘è¡Œé‡,å’Œå·²ç»åœ¨å¸‚é¢ä¸Šæµé€šçš„tokenæ•°é‡</li>
</ol>
</li>
<li>tokenåˆçº¦ä¸­å«æœ‰create,issue,retire,transfer,open,closeå…­ä¸ªaction,å’Œget_balance,get_supplyä¸¤ä¸ªé™æ€æ–¹æ³•.å…¶ä¸­åˆ›å»ºä¸€ä¸ªtoken,åªæœ‰create, issue, transferæ˜¯å¿…é¡»çš„,å…¶ä»–çš„å¯æ ¹æ®éœ€æ±‚è¿›è¡Œå¢æ·»<ol>
<li>retire ç‡ƒçƒ§è‡ªå·±çš„è‡ªå·±çš„token,è¿™é‡Œtokenç‡ƒçƒ§åæ€»é‡ä¸ä¼šå˜,ç›¸å½“äºåˆè¿”å›ç»™issueräº†,å¦‚æœéœ€è¦æ­¤åŠŸèƒ½å»ºè®®å‡å°‘totalSupplyè€Œä¸æ˜¯suppy</li>
<li>openå’Œcloseè¿™ä¸¤ä¸ªæ–¹æ³•æˆ‘çŒœæµ‹æ˜¯ä¸ºäº†å½“issuer tokenç»™æ–°è´¦å·çš„æ—¶å€™,å¯ä»¥è®¾ç½®è¿™ç¬”è´¹ç”¨,ä¸ªäººè§‰å¾—æ²¡ä»€ä¹ˆé¸Ÿç”¨</li>
<li>get_balanceå’Œget_supplyå¯ä»¥ç›´æ¥è·å–è´¦æˆ·ä½™é¢å’Œå·²ç»issueçš„token</li>
</ol>
</li>
</ul>
<h4 id="ç¼–è¯‘-éƒ¨ç½²-éªŒè¯"><a href="#ç¼–è¯‘-éƒ¨ç½²-éªŒè¯" class="headerlink" title="ç¼–è¯‘,éƒ¨ç½²,éªŒè¯"></a>ç¼–è¯‘,éƒ¨ç½²,éªŒè¯</h4><ul>
<li>ç¼–è¯‘,éƒ¨ç½²</li>
<li>è´­ä¹°ram</li>
<li>craete SHAOKUN token,æ€»é‡10000ä¸ª,æ¯”è¾ƒå€¼é’±å“ˆ</li>
<li>issue 900ä¸ªç»™eostoday1235,ç„¶ååœ¨retireæ‰(å¯ä»¥ç†è§£ä¸ºé”€æ¯,ä¸è¦è¿™ä¸ªactionä¹Ÿå¯ä»¥) </li>
<li>åç»­å†è½¬è´¦,éƒ½å¯ä»¥åœ¨æµè§ˆå™¨ä¸ŠæŸ¥åˆ°å¯¹åº”çš„ç»“æœ</li>
<li><img src="/img_eos1/eos_gif_2.gif" alt="æ¼”ç¤ºç»“æœ"></li>
<li><a href="https://github.com/shaokun11/eosabout/tree/create-token" target="_blank" rel="noopener">æºç </a></li>
</ul>
<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><ul>
<li>æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤,æˆ‘ä»¬å·²ç»å‘è¡Œäº†ä¸€ç§token,æ³¨æ„æ˜¯ä½¿ç”¨æˆ‘ä»¬è‡ªå·±çš„è´¦å·</li>
<li>å›æƒ³ä¸€ä¸‹dispatcherçš„æ–‡ç« ,æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å»åˆ¤æ–­ code == eosio.tokençš„åŸå› å‘¢? å…¶å®å°±æ˜¯ç¡®ä¿æˆ‘ä»¬è¿™ä¸ªtokenæ˜¯å¸‚é¢ä¸Šæµé€šçš„eosä»£å¸,è€Œä¸æ˜¯å…¶ä»–æŸä¸ªä¸ªäººå‘å¸ƒçš„token</li>
<li>ä¸€ä¸ªè´¦å·å¯ä»¥å‘è¡Œå¾ˆå¤štokençš„,åªè¦symbolä¸ä¸€è‡´å°±å¯ä»¥äº†,å½“ç„¶,è¿™ä¸ªè´¦å·ä¹Ÿå¯ä»¥å‘è¡Œä»¥eosä¸ºsymbolçš„token</li>
<li>æœ€ç»ˆå†å’Œä»¥å¤ªåŠçš„erc20 tokenå¯¹æ¯”ä¸€ä¸‹,å…¶å®è¿™éƒ½æ˜¯ä¸€ä¸ªå®˜æ–¹çš„æ ‡å‡†,æˆ‘ä»¬å¦‚æœæƒ³ç›´æ¥ä½¿ç”¨å®Œå…¨ä¸ç”¨ä¿®æ”¹çš„,ç›´æ¥å¾€ä¸»ç½‘éƒ¨ç½²å°±å¯ä»¥äº†.</li>
<li>æœ‰æ—¶å€™æœ‰æ–°çš„ä¸šåŠ¡éœ€æ±‚,æˆ‘ä»¬å®Œå…¨å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ¥æ›´æ”¹tokenå†…éƒ¨çš„æŸäº›ä¸šåŠ¡é€»è¾‘,æ¯•ç«Ÿå®ƒåªæ˜¯ä¸€ä»½éƒ¨ç½²åœ¨ä½ è´¦å·çš„ä¸€ä¸ªæ™ºèƒ½åˆçº¦è€Œå·²,è€Œä¸”è¿™ä¸ªåˆçº¦ä½ å®Œå…¨æœ‰æƒé™éšæ—¶æ›´æ”¹å‘¢</li>
</ul>
<h4 id="å…³äºæˆ‘"><a href="#å…³äºæˆ‘" class="headerlink" title="å…³äºæˆ‘"></a>å…³äºæˆ‘</h4><p>åŒºå—é“¾æŠ€æœ¯ç—´è¿·çš„ç¨‹åºçŒ¿ä¸€æšï¼Œå¦‚æœä½ å–œæ¬¢æˆ‘çš„æ–‡ç« ï¼Œå¯ä»¥åŠ ä¸Šå¾®ä¿¡å…±åŒå­¦ä¹ ï¼Œå…±åŒè¿›æ­¥ã€‚  </p>
<p>email <a href="mailto:&#115;&#107;&#117;&#x6e;&#110;&#x79;&#x40;&#x31;&#54;&#51;&#x2e;&#x63;&#x6f;&#x6d;" target="_blank" rel="noopener">&#115;&#107;&#117;&#x6e;&#110;&#x79;&#x40;&#x31;&#54;&#51;&#x2e;&#x63;&#x6f;&#x6d;</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/26/eosä¸­inline actionçš„ç†è§£6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shaokun">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hello shaokun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/26/eosä¸­inline actionçš„ç†è§£6/" itemprop="url">eosçš„dispatcherçš„ä½¿ç”¨(3 å®Œç»“)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-01-26T15:08:04+08:00">
                2019-01-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><p>ç»è¿‡å‰é¢ä¸¤ç¯‡æ–‡ç« çš„ç»ƒä¹ ,ç›¸ä¿¡å„ä½åŒå­¦éƒ½å·²ç»å¯¹è‡ªå®šä¹‰dispatcherå·²ç»æœ‰äº†è‡ªå·±çš„çœ‹æ³•äº†,é‚£ä¹ˆä»Šå¤©æˆ‘ä»¬ç»§ç»­è·Ÿç€å®˜æ–¹çš„æ•™ç¨‹èµ°,æŠŠæ¥ä¸‹æ¥çš„çŸ¥è¯†ç‚¹å®Œæ•´ä¸€ä¸‹</p>
<h4 id="è‡ªå®šä¹‰dispatcher-æ–¹å¼3"><a href="#è‡ªå®šä¹‰dispatcher-æ–¹å¼3" class="headerlink" title="è‡ªå®šä¹‰dispatcher æ–¹å¼3"></a>è‡ªå®šä¹‰dispatcher æ–¹å¼3</h4><ul>
<li>è¿™ç§æ–¹å¼å®˜æ–¹è¯´äº†,ä¸èƒ½ç”¨äºeosio-cppç”Ÿæˆabi,æ‰€ä»¥æˆ‘ä¹Ÿä¸è¯¦ç»†å»æ¢ç©¶äº†,æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è‡ªå·±ç ”ç©¶ä¸€ä¸‹.å®˜æ–¹æœ€åæ€»ç»“è¿™æ˜¯æœ€ä¸ºçµæ´»çš„ä¸€ç§æ–¹å¼å‘¢</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">This dispatcher places most of the security logic and control inside the action handler, however, cannot use eosio-cpp&apos;s ABI generator.</span><br><span class="line">æ­¤è°ƒåº¦ç¨‹åºå°†å¤§å¤šæ•°å®‰å…¨é€»è¾‘å’Œæ§ä»¶æ”¾åœ¨æ“ä½œå¤„ç†ç¨‹åºä¸­ï¼Œä½†æ˜¯ï¼Œä¸èƒ½ä½¿ç”¨eosio-cppçš„ABIç”Ÿæˆå™¨ã€‚</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">extern &quot;C&quot; void apply(uint64_t receiver, uint64_t code, uint64_t action) &#123; </span><br><span class="line">  switch(action) &#123;</span><br><span class="line">      case name(&quot;upsert&quot;).value: return upsert(receiver, code);</span><br><span class="line">      case name(&quot;notify&quot;).value: return notify(receiver, code);</span><br><span class="line">      case name(&quot;erase&quot;).value: return erase(receiver, code);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">To handle these requests, we move security logic that was otherwise in the dispatcher, into the action. This can provide more control, but may introduce redundancy, particularly for larger contracts. In the end, it accomplishes all the same points as the above patterns while allowing more information into the scope (namely code). Having access to code inside your action may be useful in some situations. This pattern provides the most flexibility in both the dispatcher and the action, hence &quot;Fully Flexible.&quot;</span><br><span class="line">ä¸ºäº†å¤„ç†è¿™äº›è¯·æ±‚ï¼Œæˆ‘ä»¬å°†è°ƒåº¦ç¨‹åºä¸­çš„å®‰å…¨é€»è¾‘ç§»åŠ¨åˆ°æ“ä½œä¸­ã€‚è¿™å¯ä»¥æä¾›æ›´å¤šæ§åˆ¶ï¼Œä½†å¯èƒ½ä¼šå¼•å…¥å†—ä½™ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤§å‹åˆåŒã€‚æœ€åï¼Œå®ƒå®Œæˆäº†ä¸ä¸Šè¿°æ¨¡å¼ç›¸åŒçš„æ‰€æœ‰ç‚¹ï¼ŒåŒæ—¶å…è®¸æ›´å¤šä¿¡æ¯è¿›å…¥èŒƒå›´ï¼ˆå³ä»£ç ï¼‰ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè®¿é—®æ“ä½œä¸­çš„ä»£ç å¯èƒ½å¾ˆæœ‰ç”¨ã€‚è¿™ç§æ¨¡å¼åœ¨è°ƒåº¦ç¨‹åºå’Œæ“ä½œä¸­æä¾›äº†æœ€å¤§çš„çµæ´»æ€§ï¼Œå› æ­¤â€œå®Œå…¨çµæ´»â€ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="è‡ªå®šä¹‰dispatcher-æ–¹å¼4"><a href="#è‡ªå®šä¹‰dispatcher-æ–¹å¼4" class="headerlink" title="è‡ªå®šä¹‰dispatcher æ–¹å¼4"></a>è‡ªå®šä¹‰dispatcher æ–¹å¼4</h4><ul>
<li>å®˜æ–¹è¯´,ä¸Šé¢è‡ªå®šä¹‰applyå‡½æ•°çš„æ—¶å€™,å¦‚æœactionå°‘è¿˜æ˜¯å¯ä»¥æ¥å—çš„,å¦‚æœå¾ˆå¤šå‘¢?å°±ç¼–ç¨‹äº†ä½“åŠ›åŠ³åŠ¨äº†,è€Œä¸”æœ‰å¯èƒ½å‡ºç°æ¼æ´.è¿™æ˜¾ç„¶å’Œæˆ‘ä»¬ç¨‹åºçŒ¿çš„åšæ³•ä¸ä¸€è‡´,æ‰€ä»¥å®˜æ–¹æœ€åç»™æˆ‘ä»¬æ¨èäº†æ–°çš„æ–¹æ³•,åŠŸèƒ½ç±»ä¼¼,ä¸”å‡å°‘ä½“åŠ›åŠ³åŠ¨,ä¸å¾—ä¸è¯´è¿˜æ˜¯å¾ˆè´´å¿ƒçš„</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#define EOSIO_DISPATCH_CUSTOM( TYPE, MEMBERS ) \</span><br><span class="line">extern &quot;C&quot; &#123; \</span><br><span class="line">   void apply( uint64_t receiver, uint64_t code, uint64_t action ) &#123; \</span><br><span class="line">      if( code == receiver ) &#123; \</span><br><span class="line">         switch( action ) &#123; \</span><br><span class="line">            EOSIO_DISPATCH_HELPER( TYPE, MEMBERS ) \</span><br><span class="line">         &#125; \</span><br><span class="line">         /* does not allow destructor of thiscontract to run: eosio_exit(0); */ \</span><br><span class="line">      &#125; \</span><br><span class="line">   &#125; \</span><br><span class="line">&#125; \</span><br></pre></td></tr></table></figure>
<ul>
<li>å°±æ˜¯è¿™ä¹ˆç®€å•,è™½ç„¶ç®€å•,ä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯å¾—çœ‹çœ‹æœ‰ä»€ä¹ˆé­”æ³•(ä»¥ä¸‹å†…å®¹ä¸ºå®˜æ–¹çš„ä»‹ç»)</li>
</ul>
<ol>
<li>ä¸€å®šè¦ä½¿ç”¨è¿™ä¸ª code == receiverçš„åˆ¤æ–­,è€Œè¿™ä¸ªå¯ä»¥è‡ªåŠ¨å…è®¸eosio.tokenè¿›è¡Œtransferçš„æ–¹æ³•å‘¢</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Checks if code==receiverand that the action is not transfer. If this condition is omitted, you may introduce a vulnerability into your contract. It allows the action through if the code is eosio.token and the action is transfer. This check prevents another contract with a transfer function from exploiting your contract.</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">2. åˆçº¦çš„å®ä¾‹åŒ–,å¯ä»¥çœ‹å‡ºå’Œä¹‹å‰çš„applyæ–¹æ³•æ˜¯ä¸€æ ·çš„,ä¹‹å‰æ˜¯åœ¨applyå‡½æ•°ä¸­å®ä¾‹åŒ–,è¿™é‡Œç›´æ¥ä¼ å…¥ä¸€ä¸ªå®ä¾‹</span><br></pre></td></tr></table></figure>
<p>Instantiates the TYPE (this would be your standard C++11 class)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">3. è¯´å†…éƒ¨è°ƒç”¨äº†execute_actionæ–¹æ³•,å’Œæˆ‘ä»¬ä¹‹å‰çš„è®¾è®¡ä¸€æ ·</span><br></pre></td></tr></table></figure></p>
<p>Use the EOSIO_DISPATCH_HELPER macro, which inserts a case for each MEMBER into your switch. Inside this case, it calls execute_action using a pattern very similar to the one demonstrated in the Flexible/Compatible Dispatcher defined above.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">4. ç›´æ¥æ›¿æ¢å°±å¯ä»¥äº†.ä¸ç”¨åšä»»ä½•æ”¹å˜</span><br></pre></td></tr></table></figure></p>
<p>You can then use this macro the same way you would with the provided EOSIO_DISPATCH macro.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* æ—¢ç„¶è¿™æ ·,è¿™é‡Œå¤šäº†ä¸€ä¸ªEOSIO_DISPATCH_HELPERçš„å®,æˆ‘ä»¬è¿˜æ˜¯å¾—å»æºç çœ‹çœ‹å®ƒç©¶ç«Ÿåšäº†ä»€ä¹ˆæˆ‘ä»¬æ‰èƒ½æ”¾å¿ƒå‘¢</span><br><span class="line">* è¿™é‡Œå‡ºç°äº†ä¸€ä¸ªå°çš„æƒŠå–œ,ç”±äºæˆ‘ç›®å‰çš„æºç éƒ½æ˜¯åœ¨eoså»æ‰¾,æˆ‘å±…ç„¶æ²¡æœ‰æ‰¾åˆ°EOSIO_DISPATCH_HELPERè¿™ä¸ªå®,è¿™å°±å°´å°¬äº†,è½¬è€Œæˆ‘è½¬å‘cdtçš„æºç ,æ€»ç®—æ‰¾åˆ°äº†è¿™ä¸ªå®</span><br></pre></td></tr></table></figure></p>
<p>// Helper macro for EOSIO_DISPATCH</p>
<p>#define EOSIO_DISPATCH_HELPER( TYPE,  MEMBERS ) \<br>   BOOST_PP_SEQ_FOR_EACH( EOSIO_DISPATCH_INTERNAL, TYPE, MEMBERS )</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>// Helper macro for EOSIO_DISPATCH_INTERNAL</p>
<p>#define EOSIO_DISPATCH_INTERNAL( r, OP, elem ) \<br>   case eosio::name( BOOST_PP_STRINGIZE(elem) ).value: \<br>      eosio::execute_action( eosio::name(receiver), eosio::name(code), &amp;OP::elem ); \<br>      break;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>#define EOSIO_DISPATCH( TYPE, MEMBERS ) \<br>extern â€œCâ€ { \<br>   void apply( uint64_t receiver, uint64_t code, uint64_t action ) { \<br>      if( code == receiver ) { \<br>         switch( action ) { \<br>            EOSIO_DISPATCH_HELPER( TYPE, MEMBERS ) \<br>         } \<br>         /<em> does not allow destructor of thiscontract to run: eosio_exit(0); </em>/ \<br>      } \<br>   } \<br>} \<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* è¿™é‡Œä¸€ä¸‹å­ä¸‰ä¸ªå®äº†,æˆ‘ä»¬å…³å¿ƒçš„EOSIO_DISPATCHå…¶å®å†…éƒ¨ä¹Ÿæ˜¯è°ƒç”¨äº†EOSIO_DISPATCH_HELPER,æ‰€ä»¥è¿™ç¬¬ä¸‰ç§æ–¹å¼å®šä¹‰çš„å®æˆ‘è§‰å¾—æ²¡æœ‰å¿…è¦äº†å“ˆ,</span><br><span class="line">* å“,å®˜æ–¹çš„æ–‡æ¡£è²Œä¼¼åˆè½åäº†,ä¸è¿‡å·²ç»ä¹ ä»¥ä¸ºå¸¸äº†å‘¢.</span><br><span class="line"></span><br><span class="line">####  Security, Security, Security...</span><br></pre></td></tr></table></figure></p>
<p>Your contractâ€™s first line of security begins at your dispatcher. Understanding how the dispatching of actions to your contracts is handled is imperative to limiting exposure to logic inside your actions. Always take great caution when writing a custom dispatcher, and be aware of the security implications of each individual implementation method.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* å®‰å…¨ç¬¬ä¸€,æ‰€ä»¥åº”è¯¥å°å¿ƒä½¿ç”¨applyå‡½æ•°,æ‰€ä»¥å®˜æ–¹æœ€åå»ºè®®è¿˜æ˜¯ç›´æ¥ä½¿ç”¨EOSIO_DISPATCHERå°±å¯ä»¥äº†,è‡³äºåŸå› åˆ™å¦‚ä¸‹</span><br></pre></td></tr></table></figure></p>
<p>For simple contracts that only execute internal public actions, the EOSIO_DISPATCH is more than suitable, eliminates cruft and greatly decrease the chance of introducing logical errors.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### çŒœæƒ³</span><br><span class="line">* æ—¢ç„¶ä½¿ç”¨cdtä¸­çš„EOSIO_DISPATCHå°±èƒ½å¤Ÿè¾¾åˆ°éœ€æ±‚äº†,é‚£æˆ‘ä»¬è¯¥å¦‚ä½•å®ç°å‰é¢è¯¾ç¨‹çš„ç›‘å¬å‘¢?</span><br><span class="line">* é€šè¿‡æŸ¥çœ‹EOSIO_DISPATCHERçš„åˆ¤æ–­,è¿™é‡Œæ˜¯ä¸å…è®¸codeä¸ºeosio.tokençš„çš„æ“ä½œçš„è®°å½•çš„,æ—¢ç„¶è¿™æ ·é‚£æˆ‘ä»¬æ”¹é€ ä¸€ä¸‹EOSIO_DISPATCHERå¦‚ä¸‹æ‰€ç¤º</span><br></pre></td></tr></table></figure></p>
<p>#define EOSIO_DISPATCH_CUSTOM( TYPE, MEMBERS ) \<br>extern â€œCâ€ { \<br>   void apply( uint64_t receiver, uint64_t code, uint64_t action ) { \<br>      if( code == receiver || code == â€œeosio.tokenâ€_n.value &amp;&amp; action == â€œtransferâ€_n.value) { \<br>         switch( action ) { \<br>            EOSIO_DISPATCH_HELPER( TYPE, MEMBERS ) \<br>         } \<br>         /<em> does not allow destructor of thiscontract to run: eosio_exit(0); </em>/ \<br>      } \<br>   } \<br>} \<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* é‚£ä¹ˆæœ€ç»ˆç»“æœå’Œä¸Šç¯‡æ–‡ç« çš„å†…å®¹æ˜¯ä¸€æ ·çš„,åªæ˜¯æˆ‘ä»¬ä¹Ÿæ²¡æœ‰è‡ªå·±å®ç°applyå‡½æ•°äº†,è€Œæ˜¯å€ŸåŠ©äºhelperè¿™ä¸ªå®å¸®åŠ©æˆ‘ä»¬å®Œæˆ</span><br></pre></td></tr></table></figure></p>
<p>#include &lt;eosiolib/eosio.hpp&gt;</p>
<p>#include &lt;eosiolib/print.hpp&gt;</p>
<p>using namespace eosio;</p>
<p>class [[eosio::contract]] addressbook : public eosio::contract {</p>
<p>public:<br>  using contract::contract;</p>
<p>  addressbook(name receiver, name code,  datastream<const char*> ds): contract(receiver, code, ds) {}</const></p>
<p>  [[eosio::action]]<br>  void upsert(name user, std::string first_name, std::string last_name) {<br>    require_auth(user);<br>    address_index addresses(_code, _code.value);<br>    auto iterator = addresses.find(user.value);<br>    if( iterator == addresses.end() )<br>    {<br>      addresses.emplace(user, <a href="auto&amp; row">&amp;</a> {<br>       row.key = user;<br>       row.first_name = first_name;<br>       row.last_name = last_name;<br>      });<br>      send_summary(user, â€œ successfully emplaced record to addressbookâ€);<br>    }<br>    else {<br>      std::string changes;<br>      addresses.modify(iterator, user, <a href="auto&amp; row">&amp;</a> {<br>        row.key = user;<br>        row.first_name = first_name;<br>        row.last_name = last_name;<br>      });<br>      send_summary(user, â€œ successfully modified record to addressbookâ€);<br>    }<br>  }</p>
<p>  [[eosio::action]]<br>  void erase(name user) {<br>    require_auth(user);</p>
<pre><code>address_index addresses(_self, _code.value);

auto iterator = addresses.find(user.value);
eosio_assert(iterator != addresses.end(), &quot;Record does not exist&quot;);
addresses.erase(iterator);
send_summary(user, &quot; successfully erased record from addressbook&quot;);
</code></pre><p>  }</p>
<p>  void transfer(uint64_t receiver, uint64_t code){<br>    send_summary(name(code), â€œeosio.token transferâ€);<br>  }</p>
<p>private:<br>  struct [[eosio::table]] person {<br>    name key;<br>    std::string first_name;<br>    std::string last_name;<br>    uint64_t primary_key() const { return key.value; }<br>  };</p>
<p>  void send_summary(name user, std::string message) {<br>    action(<br>      permission_level{get_self(),â€activeâ€_n},<br>      get_self(),<br>      â€œnotifyâ€_n,<br>      std::make_tuple(user, name{user}.to_string() + message)<br>    ).send();<br>  };</p>
<p>  typedef eosio::multi_index&lt;â€peopleâ€_n, person&gt; address_index;<br>};</p>
<p>#define EOSIO_DISPATCH_CUSTOM( TYPE, MEMBERS ) \<br>extern â€œCâ€ { \<br>   void apply( uint64_t receiver, uint64_t code, uint64_t action ) { \<br>      if( code == receiver || code == â€œeosio.tokenâ€_n.value &amp;&amp; action == â€œtransferâ€_n.value) { \<br>         switch( action ) { \<br>            EOSIO_DISPATCH_HELPER( TYPE, MEMBERS ) \<br>         } \<br>         /<em> does not allow destructor of thiscontract to run: eosio_exit(0); </em>/ \<br>      } \<br>   } \<br>} \</p>
<p>EOSIO_DISPATCH_CUSTOM( addressbook, (upsert)(erase)(transfer) )<br><code>`</code></p>
<h4 id="ç»“æœéªŒè¯"><a href="#ç»“æœéªŒè¯" class="headerlink" title="ç»“æœéªŒè¯"></a>ç»“æœéªŒè¯</h4><ul>
<li>é€šè¿‡æˆ‘ä»¬è‡ªå®šä¹‰çš„dispatcher,æˆ‘ä»¬å·²ç»å®ç°äº†å’Œä¸Šç¯‡æ–‡ç« åŒæ ·çš„åŠŸèƒ½,ä¸”ä¸ç”¨è‡ªå·±å®ç°applyå‡½æ•°,æå¤§çš„ç®€åŒ–äº†æ“ä½œ</li>
<li>å½“ç„¶,ç›®å‰çš„æ–¹å¼æˆ‘ä»¬å…è®¸çš„æ˜¯eosio.tokenæ‰§è¡Œtransferæ“ä½œ,é‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå¯ä»¥ä»¿ç…§å®ç°å…¶ä»–ç‰¹æ®Šåˆçº¦çš„è®°å½•,æ¯”å¦‚è¯´eosio.system(ç”¨æ¥æ“ä½œcpu,ram)çš„æˆ–è€…å…¶ä»–æˆ‘ä»¬è‡ªå®šä¹‰çš„åˆçº¦</li>
</ul>
<p><img src="/img_eos1/eos_gif_1.gif" alt="shaokun"></p>
<p><a href="https://github.com/shaokun11/eosabout/tree/eos-dispatcher-03" target="_blank" rel="noopener">æœ¬è¯¾æºç </a></p>
<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><ul>
<li>ä¸Šä¸€ç¯‡æœ€åä¸€ä¸ªé—®é¢˜,æˆ‘ä»¬å·²ç»è®°å½•äº†å½“æˆ‘ä»¬è´¦æˆ·ä¸Šeosçš„äº¤æ˜“çš„æ•°æ®,ä½†æ˜¯å…·ä½“çš„æ•°æ®æˆ‘ä»¬è¿˜ä¸çŸ¥é“å‘¢?æ¯”å¦‚è¯´è½¬ç»™è°?è°è½¬çš„?è½¬äº†å¤šå°‘?è¿˜æœ‰memo(è¿™ä¸ªä¹Ÿå¾ˆé‡è¦çš„,æœ‰æ—¶å€™å¾ˆå¤šæ•°æ®çš„æœ‰æ•ˆæ€§å¯ä»¥é€šè¿‡å®ƒæ¥è¿›è¡ŒéªŒè¯)</li>
<li>ç¬¬äºŒä¸ªé—®é¢˜,æˆ‘ä»¬æ€ä¹ˆåœ¨é“¾ä¸Šå‘æˆ‘ä»¬çš„è‡ªå·±çš„ä»£å¸å‘¢?è€Œä¸”è¿™ä¸ªä»£å¸è¦ç¬¦åˆeosä»£å¸çš„æ ‡å‡†æ ‡å‡†(è¿™é‡Œä¸ºä»€ä¹ˆè¦æŠ›å‡ºè¿™ä¸ªé—®é¢˜å‘¢?å› ä¸ºæˆ‘åªåœ¨æœ¬åœ°çš„ç¯å¢ƒæŒ‰ç…§æ•™ç¨‹èµ°,å‘è¿‡è¡Œè¿‡ä»£å¸,ä½†æ˜¯åœ¨æµ‹è¯•ç½‘,æˆ‘æ²¡æœ‰eosio.tokençš„è´¦å·,æˆ‘å±…ç„¶æ‡µé€¼äº†,ä¸çŸ¥é“æ€ä¹ˆå‘äº†),è¿‡ç¨‹å¾ˆç®€å•,ä½†æ˜¯ç•™ç»™å„ä½åŒå­¦è‡ªå·±ä¹Ÿæ€è€ƒä¸€ä¸‹</li>
<li>ä¸‰ç¯‡æ–‡ç« ä¸‹æ¥,å¯ä»¥çœ‹åˆ°è·Ÿç€å®˜ç½‘èµ°,æœ‰å¥½å¤„,æƒå¨,ä¹Ÿæœ‰å‘,æ–‡æ¡£æ€»æ˜¯è½åå®é™…æƒ…å†µ,é‚£ä¹ˆæˆ‘ä»¬èƒ½åšç‚¹ä»€ä¹ˆå—?æˆ‘è§‰å¾—èƒ½çš„,è™½ç„¶è¯­æ³•å˜äº†,ä½†æ˜¯æ ¸å¿ƒä¸å˜,æ‰€ä»¥æˆ‘ä»¬æŒæ¡å®ƒçš„åŸºç¡€æ€§å†…å®¹,å˜æ¥å˜å»æˆ‘ä»¬åªéœ€è¦å»è¡¥ä¸€ç‚¹å®ƒå˜åŒ–çš„å†…å®¹å°±å¥½äº†,å¦‚æœä½ ä¹‹å‰æœ‰åŸºç¡€,è¿™åº”è¯¥å°±æ˜¯æ‰‹åˆ°æ“’æ¥çš„äº‹æƒ…äº†,åªæ˜¯,çœ‹æˆ‘ä»¬è¿˜èƒ½å¦å­¦å¾—åŠ¨å“ˆ^_^</li>
</ul>
<h4 id="å•°å—¦ä¸€å¥"><a href="#å•°å—¦ä¸€å¥" class="headerlink" title="å•°å—¦ä¸€å¥"></a>å•°å—¦ä¸€å¥</h4><ul>
<li>è«åå…¶å¦™,å°±å«æ”¶æ‹¾ä¸œè¥¿èµ°äººäº†,å…·ä½“åŸå› éƒ½æ²¡æœ‰,å¯’å†¬çš„æœå®ä¹Ÿè½åœ¨äº†æˆ‘çš„å¤´ä¸Šäº†â€¦(ps:çŒœæµ‹æ˜¯ä¿ºç«™é”™äº†é˜Ÿå§,æ•´ä¸ªå›¢é˜Ÿä¸€èµ·èµ°äººäº†â€¦)</li>
<li>æ¢ä¸ªæ–¹å‘æƒ³,ä½•å°ä¸æ˜¯åˆç»™äº†æˆ‘ä»¬äººç”Ÿä¸­å¤šä¸€æ¬¡é€‰æ‹©çš„æœºä¼šå‘¢?</li>
<li>è¿™åº”è¯¥æ˜¯å¹´å‰çš„æœ€åä¸€ç¯‡æ–‡ç« äº†,å¸Œæœ›å¹´åèƒ½å¤Ÿç»§ç»­ç»™å¤§å®¶åˆ†äº«ä¸€äº›dappå¼€å‘çš„çŸ¥è¯†,è°¢è°¢ä½ çš„é˜…è¯»</li>
</ul>
<h4 id="å…³äºæˆ‘"><a href="#å…³äºæˆ‘" class="headerlink" title="å…³äºæˆ‘"></a>å…³äºæˆ‘</h4><p>åŒºå—é“¾æŠ€æœ¯ç—´è¿·çš„ç¨‹åºçŒ¿ä¸€æšï¼Œå¦‚æœä½ å–œæ¬¢æˆ‘çš„æ–‡ç« ï¼Œå¯ä»¥åŠ ä¸Šå¾®ä¿¡å…±åŒå­¦ä¹ ï¼Œå…±åŒè¿›æ­¥ã€‚<br>email: <a href="mailto:&#x73;&#x6b;&#x75;&#110;&#110;&#x79;&#64;&#49;&#54;&#x33;&#46;&#99;&#x6f;&#109;" target="_blank" rel="noopener">&#x73;&#x6b;&#x75;&#110;&#110;&#x79;&#64;&#49;&#54;&#x33;&#46;&#99;&#x6f;&#109;</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/19/eosä¸­inline actionçš„ç†è§£5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shaokun">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hello shaokun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/19/eosä¸­inline actionçš„ç†è§£5/" itemprop="url">eosçš„dispatcherçš„ä½¿ç”¨(2)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-01-19T20:25:13+08:00">
                2019-01-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><blockquote>
<p>å¸Œæœ›é˜…è¯»æœ¬ç¯‡æ–‡ç« çš„åŒå­¦å»çœ‹ä¸€ä¸‹ä¸Šä¸€ç¯‡æ–‡ç« ,ä¸ç„¶æ€è·¯æ–­äº†æ¥ä¸ä¸Šå°±æœ‰ç‚¹éº»çƒ¦äº†    </p>
</blockquote>
<h4 id="å¤šè¯´ä¸¤å¥"><a href="#å¤šè¯´ä¸¤å¥" class="headerlink" title="å¤šè¯´ä¸¤å¥"></a>å¤šè¯´ä¸¤å¥</h4><ul>
<li>è¯è¯´ä»¥å¤ªåŠçš„åˆ†å‰è®¡åˆ’åˆå»¶æœŸäº†,è€Œæ­¤æ¬¡çš„å‡çº§ä¸»è¦æ˜¯é’ˆå¯¹åº•å±‚çš„å®‰å…¨æœºåˆ¶,æ‰€ä»¥å¯è§å†™æ™ºèƒ½åˆçº¦çš„æœ€å…³é”®ç‚¹è¿˜æ˜¯å®‰å…¨ç¬¬ä¸€å§,</li>
<li>eosä¸€ç›´è¢«æ”»å‡»,ä»æœªè¢«åœæ­¢.æœ€è¿‘çš„eoså› ä¸ºä¸€ä¸ªderferred actionçš„é—®é¢˜çš„æ¼æ´åˆè¢«é»‘å®¢åˆ©ç”¨äº†,å“â€¦ å—ä¼¤çš„æ€»æ˜¯å¼€å‘è€…</li>
<li>å¤§å®¶å†™çš„åˆçº¦è¿˜æœ‰ä¸€ä¸ªç‚¹,å°±æ˜¯å®‰å…¨.è¿™é‡Œä¸€ä¸ªæœ‹å‹å·²ç»å¼€å‘äº†ä¸€æ¬¾åº”ç”¨,ä¹Ÿå·²ç»ä¸Šçº¿åˆ°ä¸»ç½‘,å„ç§æµ‹è¯•ä¹Ÿåšäº†,ä»€ä¹ˆé€»è¾‘,å‹åŠ›,æ•°æ®,å‰ç«¯é¡µé¢çš„è·³è½¬ç­‰ç­‰â€¦ ç„¶è€Œå½“é¡¹ç›®ä¸Šçº¿å,ä»–æ‰¾åˆ°æˆ‘å¯¹æˆ‘è¯´,åˆ«äººå¯ä»¥ç»•è¿‡å‰ç«¯ä»£ç ç›´æ¥è°ƒç”¨çš„å®ƒçš„åˆçº¦â€¦  æˆ‘åªèƒ½è¯´,è¿™å°±æ˜¯æ™ºèƒ½åˆçº¦,ä½ æ‰€å†™çš„åˆçº¦æ˜¯å…¨ä¸–ç•Œçš„äºº(å½“ç„¶,å¦‚æœä½ çš„é¡¹ç›®å¾ˆæˆåŠŸ,é‚£ä¹ˆé»‘å®¢ä¹Ÿæ˜¯ç”±å…´è¶£æ¥å…‰é¡¾çš„)éƒ½å¯ä»¥è°ƒç”¨çš„,é™¤éä½ åšä¸€äº›æƒé™çš„éªŒè¯.åœ¨eosä¸Šè¿˜å¥½,å¯ä»¥é€šè¿‡å‡çº§åˆçº¦æ¥å¼¥è¡¥,è€Œä¸”codeè¿˜ä¸ç”¨å¼€æº.ä½†æ˜¯åœ¨eth,code is law,codeè¿˜è¦å¼€æº,æ‰€ä»¥å„ä½åŒå­¦æƒ³æƒ³è¿™ä¸ªåˆçº¦å®‰å…¨çš„é‡è¦æ€§.eosåº•å±‚è™½ç„¶è¿˜æœ‰bug,æˆ‘ä»¬æ— æ³•é¿å…,ä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯åº”è¯¥å¯¹æˆ‘ä»¬çš„åº”ç”¨å±‚çš„é€»è¾‘è¿›è¡Œä¸¥æ ¼çš„æµ‹è¯•,è¿™æ ·å¼€å‘çš„æ™ºèƒ½åˆçº¦æ‰ç»å¾—ä½ä¸–ç•Œäººæ°‘çš„è€ƒéªŒ,ä½ è¯´æ˜¯ä¸æ˜¯å‘¢?</li>
</ul>
<h4 id="è‡ªå®šä¹‰dispatcher-æ–¹å¼2"><a href="#è‡ªå®šä¹‰dispatcher-æ–¹å¼2" class="headerlink" title="è‡ªå®šä¹‰dispatcher æ–¹å¼2"></a>è‡ªå®šä¹‰dispatcher æ–¹å¼2</h4><blockquote>
<p>æŒ‰ç…§ä¸Šç¯‡æ–‡ç« çš„åšæ³•,é‚£ä¹ˆæˆ‘ä»¬å®ç°äº†è‡ªå·±å®šä¹‰applyå‡½æ•°æ¥å–ä»£EOSIO_DISPATCHER,ä½†æ˜¯å®ç°çš„åŠŸèƒ½æ˜¯ä¸€æ¨¡ä¸€æ ·çš„,é‚£æˆ‘ä»¬è¿™æ ·åšçš„ç›®çš„æ˜¯ä»€ä¹ˆå‘¢?</p>
</blockquote>
<ul>
<li>é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­æŒ‰ç…§å®˜æ–¹çš„æ•™ç¨‹èµ°,é€šè¿‡å¦å¤–ä¸€ç§æ–¹å¼æ¥å®ç°.</li>
<li>é‚£ä¹ˆæ­¤ç§æ–¹å¼ç›¸å¯¹äºä¸Šä¸€ä¸­æ–¹å¼æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢?</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">This pattern provides more control over security at the expense of maintainability. Utilizing if...else if statements as opposed to a switch inherently provides more granularity.</span><br><span class="line">æ­¤æ¨¡å¼ä»¥å¯ç»´æŠ¤æ€§ä¸ºä»£ä»·æä¾›äº†å¯¹å®‰å…¨æ€§çš„æ›´å¤šæ§åˆ¶ã€‚åˆ©ç”¨if ... else ifè¯­å¥è€Œä¸æ˜¯switchæä¾›æ›´ç²¾ç»†çš„æ§åˆ¶ã€‚</span><br></pre></td></tr></table></figure>
<p>å¥½å§,æ—¢ç„¶çœ‹èµ·æ¥ä¼˜ç‚¹è¿™ä¹ˆå¤š,é‚£ä¹ˆæˆ‘ä»¬å°±çœ‹çœ‹æ˜¯æ€ä¹ˆæ ·å®ç°çš„å§</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">extern &quot;C&quot; &#123;</span><br><span class="line">  void apply(uint64_t receiver, uint64_t code, uint64_t action) &#123;</span><br><span class="line">    addressbook _addressbook(receiver);</span><br><span class="line">    if(code==receiver &amp;&amp; action==name(&quot;upsert&quot;).value) &#123;</span><br><span class="line">      execute_action(name(receiver), name(code), &amp;addressbook::upsert );</span><br><span class="line">    &#125;</span><br><span class="line">    else if(code==receiver &amp;&amp; action==name(&quot;notify&quot;).value) &#123;</span><br><span class="line">      execute_action(name(receiver), name(code), &amp;addressbook::notify );</span><br><span class="line">    &#125;</span><br><span class="line">    else if(code==receiver &amp;&amp; action==name(&quot;erase&quot;).value) &#123;</span><br><span class="line">      execute_action(name(receiver), name(code), &amp;addressbook::erase );</span><br><span class="line">    &#125;</span><br><span class="line">    else if(code==name(&quot;eosio.token&quot;).value &amp;&amp; action==name(&quot;transfer&quot;).value) &#123;</span><br><span class="line">      execute_action(name(receiver), name(code), &amp;addressbook::transfer );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>åˆçœ‹å’Œä¸Šä¸€ç¯‡æ–‡ç« ç®€ç›´æ˜¯ä¸€æ¨¡ä¸€æ ·,å°±æ˜¯æŠŠswitchæ¢æˆäº†ifâ€¦else,çœ‹æ¥å®˜æ–¹çœŸå®è¯´çš„å¤§å®è¯å‘¢</li>
<li>ä¸è¿‡,æœ€åä¸€ä¸ªelseå¤šäº†ä¸€ä¸ªåˆ¤æ–­,addressbookå»è°ƒç”¨transferæ–¹æ³•,å¯æ˜¯æˆ‘ä»¬æ²¡æœ‰å•Š,æ—¢ç„¶æ˜¯è¿™æ ·,é‚£æˆ‘ä»¬å°±ä¾æ ·ç”»è‘«èŠ¦,å¾…ä¼šå†™ä¸€ä¸ªå§</li>
<li>ç¬¬äºŒç‚¹,æœ€åä¸€ä¸ªelseåˆ¤æ–­å˜æˆäº†code == eosio.token,è¿™å°±æ˜¯æˆ‘ä»¬ä¸Šç¯‡æ–‡ç« è¯´çš„è¿™ä¸ªcodeçš„æ„ä¹‰äº†.è€Œeosio.tokenæ˜¯ç³»ç»Ÿçš„è´¦å·,å½“å‘ç”Ÿeosæˆ–è€…å…¶ä»–ä»£å¸æ—¶æ‰ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•å‘¢,é‚£ä¹ˆæˆ‘çŒœæµ‹ä¸€ä¸‹è¿™ä¸ªåˆ¤æ–­æ˜¯å½“å‘ç”Ÿeosio.tokenæ‰§è¡Œtransferçš„æ—¶å€™,å°†ä¼šæ‰§è¡Œæˆ‘ä»¬åˆçº¦transferæ–¹æ³•</li>
</ul>
<h4 id="ç»“æœéªŒè¯"><a href="#ç»“æœéªŒè¯" class="headerlink" title="ç»“æœéªŒè¯"></a>ç»“æœéªŒè¯</h4><blockquote>
<p>æŒ‰ç…§ä¸Šé¢è¯´çš„,æˆ‘ä»¬å°±æŒ‰ç…§æˆ‘ä»¬å¾—æ€è·¯å…ˆå†™ä¸€ä¸ªå§,é‚£ä¹ˆå°±åŠ ä¸€ä¸ªtransferæ–¹æ³•å¦‚ä¸‹.</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">void transfer(uint64_t receiver, uint64_t code)&#123;</span><br><span class="line">   send_summary(name(code), &quot;eosio.token transfer&quot;);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>å¾ˆç®€å•,å½“å‘ç”Ÿtransferæ—¶,æˆ‘ä»¬å‡ºå‘ä¸€ä¸ªinline actionæ¥è®°å½•ä¸€ä¸‹æ•°æ®</li>
<li>é‚£æˆ‘ä»¬çœ‹ä¸‹ç»“æœ,ç»“æœæŠ¥é”™äº†???? </li>
<li>why? æˆ‘ä»¬ä»…ä»…æ˜¯è½¬è´¦å•Š,è‡ªå·±è½¬å‡ºå»æˆ–è€…åˆ«äººè½¬è¿›æ¥,ç°åœ¨éƒ½å¤±è´¥äº†</li>
</ul>
<h4 id="ç»“æœåˆ†æ"><a href="#ç»“æœåˆ†æ" class="headerlink" title="ç»“æœåˆ†æ"></a>ç»“æœåˆ†æ</h4><p><em>Authorization failure with inline action sent to self</em></p>
<ul>
<li>æƒé™ä¸å…è®¸ç»™è‡ªå·±å‘é€å†…è”action?</li>
<li>è¿™æ˜¯ä»€ä¹ˆæƒ…å†µ?ç»™è‡ªå·±å‘é€å†…è”actionè¿˜è¦æƒé™?</li>
<li>æƒ³æƒ³æƒ³â€¦ å¯¹äº†,è¦è®©è‡ªå·±çš„åˆçº¦è°ƒç”¨å…¶ä»–åˆçº¦éœ€è¦ç»™eosio.codeå‘é€æƒé™,é‚£æˆ‘ä»¬æ¥ä¸‹æ¥è¯•è¯•çœ‹çœ‹æ˜¯ä¸æ˜¯è¿™ä¸ªåŸå› å‘¢</li>
</ul>
<p><img src="/img_eos1/eos_react9.gif" alt="shaokun"></p>
<h4 id="å†æ¬¡éªŒè¯åˆ†æç»“æœ"><a href="#å†æ¬¡éªŒè¯åˆ†æç»“æœ" class="headerlink" title="å†æ¬¡éªŒè¯åˆ†æç»“æœ"></a>å†æ¬¡éªŒè¯åˆ†æç»“æœ</h4><ul>
<li>ä½¿ç”¨owneræƒé™,ç»™eosio.codeæˆäºˆactiveæƒé™</li>
<li>æ‰§è¡Œç›¸äº’è½¬è´¦</li>
<li>æŸ¥çœ‹æ˜¯å¦èƒ½å¤Ÿå‡ºå‘æˆ‘ä»¬è‡ªå®šä¹‰çš„å†…è”action(ç»è¿‡ä¸Šä¸€æ­¥çš„æ“ä½œ,å’Œæˆ‘ä»¬ä¹‹å‰çš„ç»éªŒ,å®ƒåº”è¯¥æ˜¯è°ƒç”¨äº†æˆ‘ä»¬å¾—inline action,ä¸è¿‡è¿˜æ˜¯å¾—çœ‹äº‹å®è¯´è¯å‘¢)</li>
<li>å»kylin,ç¡®å®è¾¾åˆ°äº†æˆ‘ä»¬çš„ç»“æœ,æ— è®ºè½¬è´¦è½¬å‡ºæˆ–è€…è½¬å…¥,é‚£ä¹ˆæˆ‘ä»¬éƒ½å‘é€äº†ä¸€ä¸ªinline action<br><img src="/img_eos1/eos_react10.gif" alt="shaokun"></li>
</ul>
<p><a href="https://github.com/shaokun11/eosabout/tree/eos-dispatcher-02" target="_blank" rel="noopener">æœ¬è¯¾æºç </a>  </p>
<ul>
<li>è¿™é‡Œè¯´ä¸€ä¸‹è¿™ä¸ªæºç ,æˆ‘å·²ç»ç¼–è¯‘å¥½çš„abiå’Œwasmæ–‡ä»¶,å„ä½åŒå­¦å¯ä»¥ç›´æ¥éƒ¨ç½²,å¦‚æœè¦ä¿®æ”¹æºç ,å°±å¾—è‡ªå·±ç¼–è¯‘äº†.ä¸åŒçš„ç¼–è¯‘ç‰ˆæœ¬å¯èƒ½ä¼šæœ‰ä¸åŒçš„eosè¯­æ³•,æˆ‘è¿™é‡Œç”¨çš„æ˜¯cdt1.3.2</li>
<li>è¿˜æœ‰,éƒ¨ç½²çš„æ—¶å€™,æœ€å¥½æ–‡ä»¶å¤¹åå­—å’Œä¸»åˆçº¦çš„åå­—ä¸€æ ·,è¿™æ ·å¯ä»¥å¯ä»¥é¿å…ä¸€äº›æƒ³ä¸åˆ°çš„å¥‡å¥‡æ€ªæ€ªçš„é”™è¯¯.</li>
</ul>
<h4 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h4><ul>
<li>å…³äºä¸Šä¸€ç¯‡æ–‡ç« å¼€ç¯‡æåˆ°çš„ç±»ä¼¼ä»¥å¤ªåŠä¸­payableå…³é”®å­—çš„åŠŸèƒ½,æˆ‘æƒ³å„ä½åŒå­¦åº”è¯¥çŸ¥é“æ€ä¹ˆå®ç°äº†å§</li>
<li>é€šè¿‡æˆ‘ä»¬ç›®å‰è‡ªå·±å®ç°applyçš„æ–¹å¼,ä¸ç”¨eosio.codeæˆäºˆæƒé™,æˆ‘ä»¬æ˜¯å¯ä»¥æ‹’ç»æˆ–è€…è½¬å‡ºeosçš„,å½“ç„¶è¿™æ ·çš„æ–¹å¼è¾¾åˆ°äº†ç›®çš„,ä½†æ˜¯ä¸å¤Ÿä¼˜é›…</li>
<li>é€šè¿‡ç»“æœ,æˆ‘ä»¬å‘ç°äº†æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨åˆçº¦ä¸­æ£€æŸ¥ç›‘å¬åˆ°eosçš„è½¬å‡ºå’Œè½¬å…¥,é‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥é€šè¿‡æ­¤åšå‡ºç›¸åº”çš„åŠ¨ä½œå‘¢?ç­”æ¡ˆæ˜¯å¯ä»¥çš„,å…·ä½“æ€ä¹ˆä½¿ç”¨æˆ‘ä»¬ä»¥åçš„æ–‡ç« å†è¯´</li>
<li>é‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆä¼˜é›…çš„å®ç°æ‹’ç»è´¦æˆ·eosçš„äº¤æ˜“å‘¢,æˆ‘è§‰å¾—æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯è°ƒç”¨eosio_assert(1==2);å“ˆå“ˆ,^_^</li>
<li>é—®é¢˜åˆæ¥äº†?å¦‚æœæˆ‘ä¸è°ƒç”¨inline action,é‚£ä¹ˆæ˜¯ä¸æ˜¯æˆ‘ä¸ç”¨æˆæƒç»™eosio.codeå°±å¯ä»¥å®ç°è½¬è´¦å‘¢?ç­”æ¡ˆæ˜¯å¯ä»¥çš„,æœ¬ç¯‡æ–‡ç« ä¸»è¦æ˜¯ä¸ºäº†çœ‹åˆ°å…·ä½“çš„è½¬è´¦ç»“æœ,æ‰€ä»¥ç”¨äº†inline action,ç›¸å½“äºä¹Ÿç»™å¤§å®¶å¤ä¹ ä¸€ä¸‹è¿™ä¸ªæƒé™å§.è‡³äºè¿™ä¸ªä¸ä½¿ç”¨inline actionçš„,è¿™ä¸ªå¯ä»¥äº¤ç”±å„ä½åŒå­¦è‡ªå·±å»å®ç°äº†å“ˆ</li>
<li>é—®é¢˜åˆæ¥äº†?é‚£æˆ‘è¦æ€ä¹ˆæ‹¿å–è½¬è´¦çš„ä¿¡æ¯å‘¢?</li>
</ul>
<h4 id="å…³äºæˆ‘"><a href="#å…³äºæˆ‘" class="headerlink" title="å…³äºæˆ‘"></a>å…³äºæˆ‘</h4><p>åŒºå—é“¾æŠ€æœ¯ç—´è¿·çš„ç¨‹åºçŒ¿ä¸€æšï¼Œå¦‚æœä½ å–œæ¬¢æˆ‘çš„æ–‡ç« ï¼Œå¯ä»¥åŠ ä¸Šå¾®ä¿¡å…±åŒå­¦ä¹ ï¼Œå…±åŒè¿›æ­¥ã€‚  </p>
<p>email: <a href="mailto:&#x73;&#107;&#117;&#110;&#110;&#x79;&#x40;&#49;&#x36;&#51;&#x2e;&#x63;&#x6f;&#109;" target="_blank" rel="noopener">&#x73;&#107;&#117;&#110;&#110;&#x79;&#x40;&#49;&#x36;&#51;&#x2e;&#x63;&#x6f;&#109;</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/12/eosä¸­inline actionçš„ç†è§£4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="shaokun">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hello shaokun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/12/eosä¸­inline actionçš„ç†è§£4/" itemprop="url">eosçš„dispatcherçš„ä½¿ç”¨(1)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-01-12T09:44:26+08:00">
                2019-01-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="å¡«å‘"><a href="#å¡«å‘" class="headerlink" title="å¡«å‘"></a>å¡«å‘</h4><blockquote>
<p>ä¸Šä¸€ç¯‡æ–‡ç« æˆ‘è¿˜åœ¨åŸ‹æ€¨eosä¸­çš„æ™ºèƒ½åˆçº¦æ€ä¹ˆæ²¡æœ‰ä»¥å¤ªåŠç±»ä¼¼çš„å…³é”®å­—payableå‘¢?çœ‹æ¥åªæœ‰æ—¶é—´æ‰ä¼šå›ç­”æˆ‘çš„è¿™ä¸ªé—®é¢˜å“ˆ.ä¹Ÿæ€ªæˆ‘å›¾æ ·å›¾æ£®ç ´äº†</p>
</blockquote>
<h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><ol>
<li>æƒ³æƒ³è·ç¦»ä¸Šæ¬¡å†™æ–‡ç« å·²ç»è¿‡å»äº†å¿«2ä¸ªæœˆäº†,è€Œä¸”å·²ç»ç¿»äº†ä¸€å¹´äº†,å›æƒ³ä¸€ä¸‹å»å¹´éƒ½åšäº†ä»€ä¹ˆå‘¢?å¿˜äº†â€¦. é‚£æ˜¯ä»€ä¹ˆè®©æˆ‘åœä¸‹äº†å‘¢?<ul>
<li>å·¥ä½œ,æ¯•ç«Ÿè¦é è¿™ä¸ªæ··å£é¥­åƒ,å¿ƒç´¯â€¦</li>
<li>å› ä¸ºä¸ªäººåŸå› ,å‘¨æœ«éƒ½åœ¨å¾€åŒ»é™¢è·‘,</li>
<li>è¿™ä¸ªeosçš„çŸ¥è¯†ç‚¹æ˜¯æˆ‘å‘¨æœ«å’Œä¸‹ç­æµè§ˆå¾—åˆ°çš„ä¸€ç‚¹çŸ¥è¯†,ä¸»è¦æ˜¯ç°åœ¨æˆ‘åœ¨ç™¾åº¦ä¹Ÿæ²¡æœ‰æ‰¾åˆ°æ¯”è¾ƒåˆé€‚çš„eosæ™ºèƒ½åˆçº¦å¼€å‘æ•™ç¨‹,æ‰€ä»¥å°±æŠŠæˆ‘çš„è¿™ä¸€è·¯èµ°è¿‡æ¥çš„çŸ¥è¯†ç‚¹è®°å½•ä¸‹æ¥.æˆ‘çš„å·¥ä½œä¸»è¦ä¹Ÿæ˜¯åšæ™ºèƒ½åˆçº¦çš„å¼€å‘,æ‰€ä»¥äº†è§£ä¸€ä¸‹ä¹Ÿæ˜¯ä¸ºäº†æœªæ¥å¤±ä¸šäº†å¤šä¸€ç‚¹é€‰æ‹©.è€Œç›®å‰å…¬å¸éƒ½æ˜¯åŸºäºä»¥å¤ªåŠå’Œæ³¢åœºçš„,æ‰€ä»¥é‡ç‚¹æˆ‘è¿˜æ˜¯ä¼šæ”¾åˆ°å…¬å¸çš„é¡¹ç›®ä¸­æ¥</li>
<li>è‡³äºå…¶ä»–çš„é›¶ç¢æ—¶é—´éƒ½æ²¡æœ‰æ‰“å¼€ç”µè„‘äº†,åªæ˜¯è¡¥ä¹ äº†ä¸€äº›c++çš„çŸ¥è¯†,è™½ç„¶æˆ‘æœ‰javaåŠŸåº•,ä½†æ˜¯å¯¹ä¸æ²¡æœ‰å¸¸å†™c++çš„æˆ‘æ¥è¯´,è¯­æ³•å¯¹æˆ‘æ¥è¯´ä¸æ˜¯å¾ˆéš¾,éš¾åœ¨å¦‚ä½•åŠ¨ç¬”å†™,å¦‚ä½•ç»„ç»‡ä»£ç ç»“æ„å’Œå†™å‡ºc++çš„é£æ ¼</li>
</ul>
</li>
<li>åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­,æˆ‘ä»¬å¾—æ™ºèƒ½åˆçº¦èƒ½å¤Ÿè·‘èµ·æ¥,ä¹Ÿèƒ½å¤Ÿäº§ç”Ÿå„ç§äº¤äº’äº†.è¿™ä¹Ÿå¾—ç›Šäºå®˜æ–¹çš„æ–‡æ¡£ä¸æ–­çš„æ›´æ–°,è€Œæˆ‘ä¹Ÿæ­¢æ­¥äºè¿™ä¸ªåœ°æ–¹äº†,è€Œå¯¹äºå®˜æ–¹æ™ºèƒ½åˆçº¦çš„æœ€åä¸€ç¯‡æ–‡ç« ,dispatcherçš„ä½¿ç”¨æˆ‘é€‰æ‹©äº†è·³è¿‡.</li>
<li>è¿‘æ®µæ—¶é—´å’Œå‡ ä¸ªåŠ æˆ‘å¾®ä¿¡å¥½å‹çš„å¼€å‘è€…ä¸€èµ·æ¢è®¨ä¸Šé¢çš„å‘çš„æ—¶å€™,åˆå›å»é˜…è¯»äº†å‡ éå®˜æ–¹çš„æ•™ç¨‹,å†ç»“åˆGoogle,é‚£æš‚æ—¶æŠŠå¾—åˆ°çš„ä¸€ç‚¹çŸ¥è¯†åˆ†äº«ç»™å¤§å®¶,å¸Œæœ›èƒ½å¤Ÿå¯¹ä½ æœ‰å¸®åŠ©.</li>
</ol>
<p><a href="https://developers.eos.io/eosio-home/docs/writing-a-custom-dispatcher" target="_blank" rel="noopener">custom dispatchers</a></p>
<h4 id="ä»€ä¹ˆæ˜¯EOSIO-DISPATCH"><a href="#ä»€ä¹ˆæ˜¯EOSIO-DISPATCH" class="headerlink" title="ä»€ä¹ˆæ˜¯EOSIO_DISPATCH"></a>ä»€ä¹ˆæ˜¯EOSIO_DISPATCH</h4><blockquote>
<p>æœ¬ç¯‡æ–‡ç« æˆ‘ä»¬å…ˆè·Ÿç€ä¸Šé¢çš„é“¾æ¥,æŠŠdispatcherçš„åŸºç¡€ä¿¡æ¯å¼„æ˜ç™½,ç„¶åå†è°ˆå…¶ä»–çš„å“ˆ.è€Œæˆ‘ä¹Ÿä¼šæ ¹æ®è‡ªå·±çš„ç†è§£åƒå¤§å®¶è§£é‡Šä¸€ä¸‹,å¦‚æœæœ‰ä¸å¯¹çš„åœ°æ–¹,å¸Œæœ›å„ä½åŒå­¦å¸®æˆ‘æŒ‡æ­£è¿‡æ¥</p>
</blockquote>
<pre><code>EOSIO_DISPATCH( myclass, (upsert)(notify)(erase) )
</code></pre><p>ç›¸ä¿¡è¿™ä¸ªå¤§å®¶éƒ½çŸ¥é“æ˜¯c++çš„å®,å¸®ç»„eosçš„åˆçº¦åˆ†å‘action,é‚£ä¹ˆè¿™ä¸ªå®çš„å…·ä½“å®šä¹‰æ˜¯ä»€ä¹ˆå‘¢?æˆ‘ä»¬æ¥åˆ°æºç çœ‹çœ‹</p>
<p><a href="https://sourcegraph.com/github.com/EOSIO/eos/-/blob/contracts/eosiolib/dispatcher.hpp#L13:9-13:17" target="_blank" rel="noopener">dispatcher.cpp </a> (è¿™é‡Œçš„eosæºç è¿˜æ˜¯EOSIO_ABI,åœ¨cdt1.3åæ”¹ä¸ºäº†EOS_DISPATCHER,åªæ˜¯å®åå­—æ”¹äº†,å†…å®¹ä¸å˜)</p>
<pre><code>/** 
 * Convenient macro to create contract apply handler
 * To be able to use this macro, the contract needs to be derived from eosio::contract
 * 
 * @brief Convenient macro to create contract apply handler 
 * @param TYPE - The class name of the contract
 * @param MEMBERS - The sequence of available actions supported by this contract
 * 
 * Example:
 * @code
 * EOSIO_ABI( eosio::bios, (setpriv)(setalimits)(setglimits)(setprods)(reqauth) )
 * @endcode
 */
#define EOSIO_ABI( TYPE, MEMBERS ) \
extern &quot;C&quot; { \
   void apply( uint64_t receiver, uint64_t code, uint64_t action ) { \
      auto self = receiver; \
      if( action == N(onerror)) { \
         /* onerror is only valid if it is for the &quot;eosio&quot; code account and authorized by &quot;eosio&quot;&apos;s &quot;active permission */ \
         eosio_assert(code == N(eosio), &quot;onerror action&apos;s are only valid from the \&quot;eosio\&quot; system account&quot;); \
      } \
      if( code == self || action == N(onerror) ) { \
         TYPE thiscontract( self ); \
         switch( action ) { \
            EOSIO_API( TYPE, MEMBERS ) \
         } \
         /* does not allow destructor of thiscontract to run: eosio_exit(0); */ \
      } \
   } \
} \
</code></pre><p>çœ‹åˆ°äº†è¿™ä¸ªå®çš„å…·ä½“å®ç°,åº”è¯¥è¯´è¿™ä¸ªå‡½æ•°åœ¨æ¯”è¾ƒå¤è€çš„ç‰ˆæœ¬,éœ€è¦è‡ªå·±å®ç°çš„,åé¢eosä¸ºäº†ç®€åŒ–å¼€å‘è€…çš„å·¥ä½œ,æ‰å®šä¹‰äº†è¿™ä¸ªå®.åé¢å¾ˆå¤šçš„å®æ¯”å¦‚è¯´ACTION, CONTRACTä¹Ÿéƒ½æ˜¯å¦‚æ­¤.è¿™ä¸ªå®çš„å…·ä½“ç”¨æ³•è¯·çœ‹ä¸Šé¢çš„æ³¨é‡Š,ç»“æœå°±æ˜¯æˆ‘ä»¬ç°åœ¨å†™åˆçº¦çš„ä½¿ç”¨æ–¹å¼äº†.è¿™ä¸ªdispatcher.cppå»ºè®®å¤§å®¶å¯ä»¥æ·±å…¥äº†è§£ä¸€ä¸‹,å¯¹åé¢çš„æ™ºèƒ½åˆçº¦å¼€å‘æˆ–è€…å‡ºç°çš„bugéƒ½ä¼šæœ‰æ›´åŠ æ·±ä¸€æ­¥çš„çœ‹æ³•</p>
<p>è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªå…³é”®ç‚¹å°±æ˜¯,æˆ‘ä»¬çš„æ™ºèƒ½åˆçº¦å¦‚æœè¦èƒ½å¤Ÿä½¿ç”¨,å¿…é¡»æä¾›ä¸€ä¸ªapplyçš„å‡½æ•°,è€Œä¸Šé¢çš„å®å°±æ˜¯å¸®åŠ©æˆ‘ä»¬å®ç°çš„è¿™ä¸ªapplyå‡½æ•°.é‚£ä¹ˆç–‘é—®æ¥äº†,æˆ‘æ˜¯ä¸æ˜¯è‡ªå·±å®ç°ä¸€ä¸ªapplyå‡½æ•°,ä¸ç”¨ä¸Šé¢çš„å®,ä¹Ÿå¯ä»¥å®Œæˆè¿™ä¸ªå·¥ä½œå‘¢?<br>ç­”æ¡ˆæ˜¯å¯ä»¥çš„</p>
<h4 id="è‡ªå®šä¹‰dispatcher-æ–¹å¼1"><a href="#è‡ªå®šä¹‰dispatcher-æ–¹å¼1" class="headerlink" title="è‡ªå®šä¹‰dispatcher æ–¹å¼1"></a>è‡ªå®šä¹‰dispatcher æ–¹å¼1</h4><blockquote>
<p>è¿™é‡ŒåŒæ ·è·Ÿç€å®˜æ–¹çš„æ•™ç¨‹èµ°</p>
</blockquote>
<pre><code>extern &quot;C&quot; {
    void apply(uint64_t receiver, uint64_t code, uint64_t action) {
        auto self = receiver;
        if( code == self ) {
          addressbook _addressbook(name(receiver));
          switch(action) {
            case name(&quot;upsert&quot;).value: 
              execute_action(name(receiver), name(code), &amp;addressbook::upsert); 
              break;
            case name(&quot;notify&quot;).value: 
              execute_action(name(receiver), name(code), &amp;addressbook::notify); 
              break;
            case name(&quot;erase&quot;).value: 
              execute_action(name(receiver), name(code), &amp;addressbook::erase); 
              break;
          }
        }
    }
};
</code></pre><p>1.</p>
<ul>
<li>å¯ä»¥çœ‹åˆ°applyå‡½æ•°æ¥æ”¶ä¸‰ä¸ªå‚æ•°,ç¬¬ä¸€ä¸ªreceiver,åˆçº¦çš„æ‹¥æœ‰è€…,</li>
<li>ç¬¬äºŒä¸ªå‚æ•°code,è°ƒç”¨åˆçº¦çš„å‘èµ·äºº(è¿™ä¸ªå‚æ•°æˆ‘ç†è§£ä¸ºé€šè¿‡ä»€ä¹ˆæ–¹å¼è°ƒç”¨çš„,å¦‚æœç›´æ¥é€šè¿‡è°ƒç”¨æœ¬åˆçº¦çš„,è¿™ä¸ªå‚æ•°å°±æ˜¯self,è€Œå¦‚æœé€šè¿‡å…¶ä»–æ™ºèƒ½åˆçº¦æ¯”å¦‚è¯´eosio.token,è¿™ä¸ªcodeå°±æ˜¯eosio.token,æˆ–è€…å…¶ä»–åˆçº¦çš„æ‹¥æœ‰è€…)</li>
<li>ç¬¬ä¸‰ä¸ª,æ‰§è¡Œåˆçº¦çš„action,ä¹Ÿå°±æ˜¯åˆçº¦çš„å‡½æ•°å,è¿™ä¸ªåˆçº¦è¢«æ ‡è¯†ä¸ºaction</li>
</ul>
<ol start="2">
<li>ifä¸­åˆ¤æ–­å¦‚æœåˆçº¦çš„è°ƒç”¨è€…æ˜¯ç›´æ¥è°ƒç”¨æ­¤åˆçº¦çš„,å³ä¸æ˜¯é€šè¿‡å…¶ä»–åˆçº¦è°ƒç”¨æœ¬åˆçº¦çš„</li>
<li>å®ä¾‹åŒ–addressbookè¿™ä¸ªç±»,(è¿™é‡Œæœ‰ç‚¹ç–‘æƒ‘çš„æ˜¯,è¿™ä¸ª_addressbookåœ¨è¿™é‡Œä»£è¡¨çš„æ˜¯ç±»,è€Œaddressbookæ‰æ˜¯å¯¹è±¡,æ²¡æœ‰æ˜ç™½è¿™æ˜¯ä¸ºä»€ä¹ˆ,åœ¨c++ ä¸­å®ä¾‹åŒ–ä¸€ä¸ªç±»ä¸æ˜¯ T t è¿™ç§å½¢å¼å—?),è¿™ä¸ªå®ä¾‹åŒ–æ¯”è¾ƒå¤è€äº†,åªæ¥å—äº†ä¸€ä¸ªå‚æ•°,åœ¨cdt1.3è¦æ¥å—ä¸‰ä¸ªå‚æ•°,è¯·æ³¨æ„</li>
<li>ä¸€ä¸ªswitchç»“æ„,æ ¹æ®å¯¹åº”çš„actionçš„åå­—åˆ†å‘å¯¹åº”çš„åŠ¨ä½œ</li>
<li><p>ä½¿ç”¨eosio::execute_actionæ‰§è¡Œå¯¹åº”çš„action</p>
<ul>
<li><p>è¿™é‡Œå¤§å®¶åˆçœ‹åˆ°äº†ä¸€ä¸ªæ–°çš„ä¸œè¥¿äº†,ä¸è¦æ€•,æˆ‘ä»¬çœ‹çœ‹æ˜¯ä»€ä¹ˆ</p>
<pre><code>   /**
 * @defgroup dispatcher Dispatcher API
 * @brief Defines functions to dispatch action to proper action handler inside a contract
 * @ingroup contractdev
 */

/**
 * @defgroup dispatchercpp Dispatcher C++ API
 * @brief Defines C++ functions to dispatch action to proper action handler inside a contract
 * @ingroup dispatcher
 * @{
 */

/**
 * Unpack the received action and execute the correponding action handler
 * 
 * @brief Unpack the received action and execute the correponding action handler
 * @tparam T - The contract class that has the correponding action handler, this contract should be derived from eosio::contract
 * @tparam Q - The namespace of the action handler function 
 * @tparam Args - The arguments that the action handler accepts, i.e. members of the action
 * @param obj - The contract object that has the correponding action handler
 * @param func - The action handler
 * @return true  
 */
template&lt;typename T, typename Q, typename... Args&gt;
bool execute_action( T* obj, void (Q::*func)(Args...)  ) {
...
}
</code></pre></li>
<li><p>è¿™é‡Œæˆ‘æŠŠå…·ä½“å®ç°åˆ æ‰äº†,åªç•™ä¸‹äº†æ³¨é‡Šå’Œæ–¹æ³•ç­¾å,å¯ä»¥çœ‹åˆ°æ˜¯ä¸€ä¸ªæ¨¡æ¿å‡½æ•°,é‚£æˆ‘ä»¬å°±çœ‹çœ‹ä»–çš„ä½œç”¨æ˜¯ä»€ä¹ˆäº†</p>
<pre><code>Unpack the received action and execute the correponding action handler
è§£å‹ç¼©æ”¶åˆ°çš„æ“ä½œå¹¶æ‰§è¡Œç›¸åº”çš„æ“ä½œå¤„ç†ç¨‹åº
</code></pre></li>
<li>å†ç»“åˆä¸Šé¢çš„å…·ä½“çš„å‚æ•°çš„ç”¨æ³•,å°±çŸ¥é“äº†åŸæ¥åˆæ˜¯ä¸€ä¸ªdispatcherçš„å¸®åŠ©å‡½æ•°,å¸®æˆ‘ä»¬å»åˆ†å‘å¯¹åº”çš„action,åªæ˜¯ä¼ é€’çš„æ–¹å¼å˜äº†.</li>
<li>å¾ˆå¥½,ç°åœ¨æˆ‘ä»¬å·²ç»æŠ›å¼ƒäº†ç³»ç»Ÿæä¾›çš„EOSIO_DISPATCHè€Œè‡ªå·±å®ç°äº†è¿™ä¸ªapplyå‡½æ•°,è‡³äºèƒ½ä¸èƒ½ç”¨å‘¢?é‚£æˆ‘ä»¬æ¥ä¸‹æ¥è¯•è¯•äº†</li>
</ul>
</li>
</ol>
<h4 id="è‡ªå®šä¹‰dispatcher-æ–¹å¼1-ç»“æœå±•ç¤º"><a href="#è‡ªå®šä¹‰dispatcher-æ–¹å¼1-ç»“æœå±•ç¤º" class="headerlink" title="è‡ªå®šä¹‰dispatcher æ–¹å¼1 ç»“æœå±•ç¤º"></a>è‡ªå®šä¹‰dispatcher æ–¹å¼1 ç»“æœå±•ç¤º</h4><blockquote>
<p>æœ¬æ¬¡æˆ‘ä»¬ç›´æ¥copyçš„å®˜æ–¹çš„addressbookçš„æºç ,ç„¶åä½¿ç”¨è‡ªå·±å®ç°applyå‡½æ•°<br>ç²¾ç®€ä¸€äº›ä¸å¿…è¦çš„å‚æ•°,å®ç°åŠŸèƒ½ä¸ºä¸»<br>ä¸Šé¢æˆ‘è¯´è¿‡,ç”±äºç‰ˆæœ¬çš„åŸå› ,ç›®å‰çš„ç‰ˆæœ¬æˆ‘ä»¬éœ€è¦åœ¨å®ä¾‹åŒ–addressbookçš„æ—¶å€™ä¼ å…¥ä¸‰ä¸ªå‚æ•°</p>
</blockquote>
<pre><code>addressbook _addressbook(name(receiver),name(code),datastream&lt;const char*&gt;(nullptr,0));
</code></pre><blockquote>
<p>æœ€ç»ˆæ”¹é€ äº†çš„ä»£ç å¦‚ä¸‹</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;eosiolib/eosio.hpp&gt;</span><br><span class="line">#include &lt;eosiolib/print.hpp&gt;</span><br><span class="line"></span><br><span class="line">using namespace eosio;</span><br><span class="line"></span><br><span class="line">class [[eosio::contract]] addressbook : public eosio::contract &#123;</span><br><span class="line"></span><br><span class="line">public:</span><br><span class="line">  using contract::contract;</span><br><span class="line">  </span><br><span class="line">  addressbook(name receiver, name code,  datastream&lt;const char*&gt; ds): contract(receiver, code, ds) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  [[eosio::action]]</span><br><span class="line">  void upsert(name user, std::string first_name, std::string last_name) &#123;</span><br><span class="line">    require_auth(user);</span><br><span class="line">    address_index addresses(_code, _code.value);</span><br><span class="line">    auto iterator = addresses.find(user.value);</span><br><span class="line">    if( iterator == addresses.end() )</span><br><span class="line">    &#123;</span><br><span class="line">      addresses.emplace(user, [&amp;]( auto&amp; row ) &#123;</span><br><span class="line">       row.key = user;</span><br><span class="line">       row.first_name = first_name;</span><br><span class="line">       row.last_name = last_name;</span><br><span class="line">      &#125;);</span><br><span class="line">      send_summary(user, &quot; successfully emplaced record to addressbook&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">      std::string changes;</span><br><span class="line">      addresses.modify(iterator, user, [&amp;]( auto&amp; row ) &#123;</span><br><span class="line">        row.key = user;</span><br><span class="line">        row.first_name = first_name;</span><br><span class="line">        row.last_name = last_name;</span><br><span class="line">      &#125;);</span><br><span class="line">      send_summary(user, &quot; successfully modified record to addressbook&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  [[eosio::action]]</span><br><span class="line">  void erase(name user) &#123;</span><br><span class="line">    require_auth(user);</span><br><span class="line"></span><br><span class="line">    address_index addresses(_self, _code.value);</span><br><span class="line"></span><br><span class="line">    auto iterator = addresses.find(user.value);</span><br><span class="line">    eosio_assert(iterator != addresses.end(), &quot;Record does not exist&quot;);</span><br><span class="line">    addresses.erase(iterator);</span><br><span class="line">    send_summary(user, &quot; successfully erased record from addressbook&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  [[eosio::action]]</span><br><span class="line">  void notify(name user, std::string msg) &#123;</span><br><span class="line">    require_auth(get_self());</span><br><span class="line">    require_recipient(user);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">private:</span><br><span class="line">  struct [[eosio::table]] person &#123;</span><br><span class="line">    name key;</span><br><span class="line">    std::string first_name;</span><br><span class="line">    std::string last_name;</span><br><span class="line">    uint64_t primary_key() const &#123; return key.value; &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  void send_summary(name user, std::string message) &#123;</span><br><span class="line">    action(</span><br><span class="line">      permission_level&#123;get_self(),&quot;active&quot;_n&#125;,</span><br><span class="line">      get_self(),</span><br><span class="line">      &quot;notify&quot;_n,</span><br><span class="line">      std::make_tuple(user, name&#123;user&#125;.to_string() + message)</span><br><span class="line">    ).send();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  typedef eosio::multi_index&lt;&quot;people&quot;_n, person&gt; address_index;</span><br><span class="line">  </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">extern &quot;C&quot; &#123;</span><br><span class="line">    void apply(uint64_t receiver, uint64_t code, uint64_t action) &#123;</span><br><span class="line">        auto self = receiver;</span><br><span class="line">        if( code == self ) &#123;</span><br><span class="line">          addressbook _addressbook(name(receiver),name(code),datastream&lt;const char*&gt;(nullptr,0));</span><br><span class="line">          switch(action) &#123;</span><br><span class="line">            case name(&quot;upsert&quot;).value: </span><br><span class="line">              execute_action(name(receiver), name(code), &amp;addressbook::upsert); </span><br><span class="line">              break;</span><br><span class="line">            case name(&quot;notify&quot;).value: </span><br><span class="line">              execute_action(name(receiver), name(code), &amp;addressbook::notify); </span><br><span class="line">              break;</span><br><span class="line">            case name(&quot;erase&quot;).value: </span><br><span class="line">              execute_action(name(receiver), name(code), &amp;addressbook::erase); </span><br><span class="line">              break;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="ç»“æœå±•ç¤º"><a href="#ç»“æœå±•ç¤º" class="headerlink" title="ç»“æœå±•ç¤º"></a>ç»“æœå±•ç¤º</h4><ol>
<li>æ­¤æ¬¡åˆçº¦éƒ¨ç½²åœ¨kylinä¸Šçš„shaokun11114è´¦å·ä¸Šå¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä¹Ÿå®Œç¾å®ç°äº†æ•°æ®å¢åŠ å’Œåˆ é™¤</li>
</ol>
<p><img src="/img_eos1/eos_react8.gif" alt="shaokun"></p>
<ol start="2">
<li>å»kylinæŸ¥çœ‹ç»“æœ,å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å¾—äº¤æ˜“è®°å½•,å…¶ä¸­çš„notifyä¹Ÿå¯ä»¥çœ‹åˆ°,è¯´æ˜applyå‡½æ•°æ­£å¸¸ä½¿ç”¨</li>
</ol>
<p><img src="/img_eos1/eos15.png" alt="shaokun"></p>
<p><a href="https://github.com/shaokun11/eosabout/tree/eos-dispatcher-01" target="_blank" rel="noopener">æºç </a></p>
<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><ol>
<li>è¿™å°±å®Œäº†?å½“ç„¶æ²¡æœ‰,è¿™ç¯‡æ–‡ç« åªæ˜¯ç®€å•çš„å’Œå¤§å®¶ä¸€èµ·èµ°èµ°å®˜ç½‘çš„dispatcher,å½“ç„¶è¿˜æ²¡æœ‰èµ°å®Œ,å¦‚æœåªæ˜¯è¿™æ ·å†™äº†èƒ½å¤Ÿå®ç°åŠŸèƒ½é‚£å’Œç”¨eosæä¾›çš„å®æ²¡ä»€ä¹ˆåŒºåˆ«äº†å‘¢</li>
<li>æˆ‘å»ºè®®å„ä½åŒå­¦æ¥è§¦åˆ°é”™è¯¯ä¸è¦æ…Œ,ä¹Ÿä¸è¦æ€¥,å„ä½å¯ä»¥å…ˆè‡ªå·±çœ‹çœ‹æŠ¥é”™è¯¯çš„ä¿¡æ¯æç¤º,å¯ä»¥æŠŠè¿™ä¸ªç²˜è´´åˆ°Googleä¸Šæ‰¾ä¸€ä¸‹ç­”æ¡ˆ,è¿™æ ·è‡ªå·±æ‰¾å¯»åˆ°çš„ç­”æ¡ˆè®°å¿†ä¼šæ·±åˆ»è®¸å¤š</li>
<li>æ¥ä¸‹æ¥å°†æˆ‘è¿›ä¸€æ­¥è·Ÿç€å®˜ç½‘èµ°,æŠŠå‰©ä¸‹çš„ä¸€ç‚¹ç‚¹è®²æ˜ç™½,è€Œè¿™æ‰æ˜¯dispatcherçš„çœŸæ­£ç”¨æ³•å‘¢.å¯ä»¥è§£å†³æ–‡ç« å¼€å¤´æåˆ°çš„payableçš„é—®é¢˜å‘¢</li>
<li>è°¢è°¢å¤§å®¶çš„æµè§ˆ,å¸Œæœ›æœ‰å‘ç°é”™è¯¯çš„åŒå­¦å¯ä»¥åŠ ä¸Šæˆ‘å¾®ä¿¡å¸®æˆ‘æŒ‡å‡ºæ¥,å†æ¬¡æ„Ÿè°¢.</li>
</ol>
<h4 id="å…³äºæˆ‘"><a href="#å…³äºæˆ‘" class="headerlink" title="å…³äºæˆ‘"></a>å…³äºæˆ‘</h4><p>åŒºå—é“¾æŠ€æœ¯ç—´è¿·çš„ç¨‹åºçŒ¿ä¸€æšï¼Œå¦‚æœä½ å–œæ¬¢æˆ‘çš„æ–‡ç« ï¼Œå¯ä»¥åŠ ä¸Šå¾®ä¿¡å…±åŒå­¦ä¹ ï¼Œå…±åŒè¿›æ­¥ã€‚  </p>
<p>email: <a href="mailto:&#115;&#x6b;&#117;&#110;&#x6e;&#121;&#64;&#x31;&#54;&#51;&#46;&#99;&#x6f;&#x6d;" target="_blank" rel="noopener">&#115;&#x6b;&#117;&#110;&#x6e;&#121;&#64;&#x31;&#54;&#51;&#46;&#99;&#x6f;&#x6d;</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">shaokun</p>
              <p class="site-description motion-element" itemprop="description">ç‚¹æ»´ç§¯ç´¯,èšå°‘æˆå¤š!             å¿ƒä¸­æœ‰å–„,ä¸éª„ä¸èº</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">37</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">shaokun</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        
<div class="busuanzi-count">
 <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i> è®¿é—®äººæ•°
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i> è®¿é—®æ€»é‡
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      æ¬¡
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
